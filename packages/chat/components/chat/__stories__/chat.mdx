import { ArgTypes, Markdown, Meta } from '@storybook/blocks';
import { cdnJs, cdnCss } from '../../../../../globals/internal/storybook-cdn';
import * as ChatStories from './chat.stories';
import packageJson from '../../../package.json';

<Meta of={ChatStories} />

# Chat

> ðŸ’¡ Check our
> [Stackblitz](https://stackblitz.com/github/carbon-design-system/carbon-labs/tree/main/packages/chat/examples/chat)
> example implementation.

[![Edit carbon-labs](https://developer.stackblitz.com/img/open_in_stackblitz.svg)](https://stackblitz.com/github/carbon-design-system/carbon-labs/tree/main/packages/chat/examples/chat)

## Overview

The Chat component is a collaboration between the IBM Research Visual AI Lab and the Carbon team to provide an easily expandable chat interface to interact with large language models.

## Getting started

Here's a quick example to get you started.

### JS (via import)

```javascript
import '@carbon-labs/ai-chat/es/index.js';
```

### API call example
```html
<clabs-chat
  user-name="user"
  agent-name="bot"
  auto-update
  model="llama-2"
  user-prompt="You are Watson, a helpful assistant"
  api-url="localhost:5001/generate_response"
  temperature="0.15">
</clabs-chat>
```

### API stream example
```html
<clabs-chat
  user-name="user"
  agent-name="bot"
  stream-responses
  api-url="localhost:5001/generate_response">
</clabs-chat>
```

### External control example
```html
 <clabs-chat
  user-name="user"
  agent-name="bot"
  loading={false}
  .conversation="{conversationJSON}"
  @on-user-message-update-request="${(e) => {
    console.log(e);
  }}"
  @on-user-regeneration-request="${(e) => {
    console.log(e);
  }}"
  @on-user-feedback-request="${(e) => {
    console.log(e);
  }}"
  @on-user-text-input="${(e) => {
    console.log(e);
  }}"
  @on-message-element-tag-selected="${(e) => {
    console.log(e);
  }}"
  @on-message-element-selected="${(e) => {
    console.log(e);
  }}">
</clabs-chat>
```

### Slotting example
```html
 <clabs-chat user-name="user" agent-name="bot" conversation="{conversation}">
  <clabs--chat-messages slot="messages">

    <clabs--chat-message slot="message-list" origin="user" time-stamp="9:02pm" index="0">
      <clabs--chat-text slot="message-content" content="Showcase every type of Element available in this Chat component.">
      </clabs--chat-text>
    </clabs--chat-message>

    <clabs--chat-message slot="message-list" origin="bot" time-stamp="9:04pm" index="1">

      <!-- Display a text element -->
      <clabs--chat-text slot="message-content" content='This is a textElement, displays text following Carbon design guidelines.'></clabs--chat-text>

      <!-- Display a text element with HTML included -->
      <clabs--chat-text slot="message-content" content='TextElement can also render simple HTML as such:\n <h2>This is using a h2 tag</h2>\n'></clabs--chat-text>

      <!-- Custom slotted div with any content -->
      <div slot="message-content">
        <iframe width="256" height="256" src="https://www.youtube.com/embed/oSCX78-8-q0?si=kCcIHjehhVn-4PSO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>

      <!-- File Card -->
      <clabs--chat-card slot="message-content" type="file" content='https://arxiv.org/pdf/2312.05688.pdf'></clabs--chat-card>

      <!-- Show a CSV table -->
      <clabs--chat-table slot="message-content" content='Name,Age,Occupation,Location,State\nJerry,35,Comedian,Upper east side,NY\nGeorge,35,Unemployed,Queens,NY\nElaine,32,Publisher,Midtown,NY\nKramer,36,Unknown,Upper east side,NY'></clabs--chat-table>
      
      <!-- Show code -->
      <clabs--chat-code slot="message-content" content='from math import sqrt\n#prime function to check given number prime or not:\ndef Prime(number,itr):\n\t#base condition\n\tif itr == 1:\n\t\treturn True\n\t#if given number divided by itr or not\n\tif number % itr == 0:\n\t\treturn False\n\t#Recursive function Call\n\tif Prime(number,itr-1) == False:\n\t\treturn False\n\treturn True\n'></clabs--chat-code>
   
      <!-- Action buttons -->
      <clabs--chat-tags slot="message-content" content='["Simone de Beauvoir","RenÃ© Descartes","Jean-Paul Sartre","Voltaire","Michel Foucault","Albert Camus"]'></<clabs--chat-tags>
      
      <!-- Text lists -->
      <clabs--chat-list slot="message-content" content='1. Google.com (United States)\n2. YouTube.com (US)\n3. Facebook.com (US)\n4. Baidu.com (China)\n5. Wikipedia.org (US)'></clabs--chat-list>
      
      <!-- Charts -->
      <clabs--chat-chart container-height="200px" slot="message-content" content='{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"Boxplot example with random data","data":{"values":[{"group":"Group A","value":34},{"group":"Group A","value":28},{"group":"Group A","value":55},{"group":"Group B","value":91},{"group":"Group B","value":81},{"group":"Group B","value":67}]},"mark":"boxplot","encoding":{"y":{"field":"group","type":"nominal"},"x":{"field":"value","type":"quantitative"}}}'></clabs--chat-chart>

    </clabs--chat-message>

  </clabs--chat-messages>

</clabs-chat>
```

### Styles

You'll also need to import the theming tokens from `@carbon/styles` either from
npm or from our CDN helpers. Checkout our Stackblitz example above to see how
that is implemented.

<Markdown>{`${cdnJs({ components: ['chat'] }, packageJson)}`}</Markdown>
<Markdown>{`${cdnCss()}`}</Markdown>

<ArgTypes of="clabs-chat"/>
