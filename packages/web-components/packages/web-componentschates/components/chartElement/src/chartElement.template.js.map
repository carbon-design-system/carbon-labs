{"version":3,"sources":["components/chartElement/src/chartElement.template.ts","components/chartElement/src/chartElement.template.js"],"names":["html","settings","stablePrefix","clabsPrefix","unsafeHTML","Maximize16","Download16","Launch16","Code16","Close16","ViewNext16","chartElementTemplate","customElementClass","_errorMessage","errorMessage","chartLoading","content","debugMode","streaming","thumbNail","_buildLoader","buildLoader","_openFullscreenView","openFullscreenView","_exportToImage","exportToImage","_openCodeView","openCodeView","_handleLiveRawEditorChange","handleLiveRawEditorChange","_handleLiveCarbonEditorChange","handleLiveCarbonEditorChange","showModal","_openEditorView","openEditorView","closeModal","_lightenSpec","lightenSpec","_visualizationSpec","_editedContent","editedContent","disableOptions","disableEditor","disableExport","disableFullscreen","disableCodeInspector","_handleMouseOut","handleMouseOut","_handleMouseOver","handleMouseOver","_handleOriginalEditorValidation","handleOriginalEditorValidation","_handleCarbonEditorValidation","handleCarbonEditorValidation","modalMode","_uniqueID","uniqueID","editOriginalSpecification","_showOriginalSpec","showOriginalSpec","_showCarbonSpec","showCarbonSpec","isHovered","_enableContext","enableContext","_appendToContext","appendToContext","_chartClicked","chartClicked","exportedImageURL","_handleFullScreenScroll","handleFullScreenScroll","slot","JSON","stringify","parse"],"mappings":"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","file":"chartElement.template.js","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html } from 'lit';\nimport { settings } from '@carbon-labs/utilities/es/settings/index.js';\nconst { stablePrefix: clabsPrefix } = settings;\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\n\nimport '../../errorElement/errorElement.js';\nimport '@carbon/web-components/es/components/button/index.js';\nimport '@carbon/web-components/es/components/icon-button/index.js';\nimport '@carbon/web-components/es/components/modal/index.js';\nimport '@carbon/web-components/es/components/checkbox/index.js';\nimport '@carbon/web-components/es/components/content-switcher/index.js';\n\nimport '../../codeElement/codeElement.js';\n\nimport Maximize16 from '@carbon/web-components/es/icons/maximize/16.js';\nimport Download16 from '@carbon/web-components/es/icons/download/16.js';\nimport Launch16 from '@carbon/web-components/es/icons/launch/16.js';\nimport Code16 from '@carbon/web-components/es/icons/code/16.js';\nimport Close16 from '@carbon/web-components/es/icons/close/16.js';\nimport ViewNext16 from '@carbon/web-components/es/icons/view-next/16.js';\n\n/**\n * Lit template for card\n *\n * @param {object} customElementClass Class functionality for the custom element\n * @returns {TemplateResult<1>} Lit html template\n */\nexport function chartElementTemplate(customElementClass) {\n  const {\n    _errorMessage: errorMessage,\n    chartLoading,\n    content,\n    debugMode,\n    streaming,\n    thumbNail,\n    _buildLoader: buildLoader,\n    _openFullscreenView: openFullscreenView,\n    _exportToImage: exportToImage,\n    _openCodeView: openCodeView,\n    _handleLiveRawEditorChange: handleLiveRawEditorChange,\n    _handleLiveCarbonEditorChange: handleLiveCarbonEditorChange,\n    showModal,\n    _openEditorView: openEditorView,\n    closeModal,\n    _lightenSpec: lightenSpec,\n    _visualizationSpec,\n    _editedContent: editedContent,\n    disableOptions,\n    disableEditor,\n    disableExport,\n    disableFullscreen,\n    disableCodeInspector,\n    _handleMouseOut: handleMouseOut,\n    _handleMouseOver: handleMouseOver,\n    _handleOriginalEditorValidation: handleOriginalEditorValidation,\n    _handleCarbonEditorValidation: handleCarbonEditorValidation,\n    modalMode,\n    _uniqueID: uniqueID,\n    editOriginalSpecification,\n    _showOriginalSpec: showOriginalSpec,\n    _showCarbonSpec: showCarbonSpec,\n    isHovered,\n    _enableContext: enableContext,\n    _appendToContext: appendToContext,\n    _chartClicked: chartClicked,\n    exportedImageURL,\n    _handleFullScreenScroll: handleFullScreenScroll,\n  } = customElementClass;\n\n  return html`\n    ${showModal\n      ? html`\n          <div class=\"${clabsPrefix}--chat-chart-fullscreen-container-close\">\n            <cds-icon-button\n              kind=\"tertiary\"\n              aria-label=\"Close Fullscreen\"\n              role=\"button\"\n              align=\"bottom-right\"\n              @click=\"${closeModal}\">\n              ${Close16({ slot: 'icon' })}\n              <span slot=\"tooltip-content\">${'Close ' + modalMode}</span>\n            </cds-icon-button>\n          </div>\n        `\n      : html``}\n    ${content\n      ? html`\n    <div class=\"${clabsPrefix}--chat-chart-fullscreen-container\" @wheel=\n          \"${handleFullScreenScroll}\" style=\"display:${\n          modalMode === 'fullscreen' ? 'flex' : 'none'\n        };\">\n\n      <div\n          class=\"${clabsPrefix}--chat-chart-modal-container\" id=\"${clabsPrefix}--chat-chart-fullscreen-embed-vis-${uniqueID}\">\n\n      </div>\n    </div>\n\n    <div class=\"${clabsPrefix}--chat-chart-fullscreen-container\" style=\"display:${\n          modalMode === 'edit' ? 'flex' : 'none'\n        };\">\n\n      ${\n        chartLoading || errorMessage\n          ? html`\n              <div class=\"${clabsPrefix}--chat-editor-modal-section-chart\">\n                <div class=\"${clabsPrefix}--chat-chart-loading-container\">\n                  ${errorMessage\n                    ? html` <div class=\"${clabsPrefix}--chat-chart-error-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-error-text\">\n                          ${errorMessage}\n                        </div>`\n                    : html` <div\n                        class=\"${clabsPrefix}--chat-chart-loading-grid\">\n                        ${unsafeHTML(buildLoader())}\n                      </div>`}\n                </div>\n              </div>\n            `\n          : html` <div\n              class=\"${clabsPrefix}--chat-editor-modal-section-chart\"\n              id=\"${clabsPrefix}--chat-chart-editor-embed-vis-${uniqueID}\"></div>`\n      }\n\n\n        <div class=\"${clabsPrefix}--chat-editor-modal-section-code\">\n          <div class=\"${clabsPrefix}--chat-editor-modal-header\">\n            <cds-content-switcher value=\"carbonified\">\n              <cds-content-switcher-item\n                value=\"original\"\n                selected\n                data-selection=\"original\"\n                @click=\"${showOriginalSpec}\">\n                Edit Original Spec\n              </cds-content-switcher-item>\n              <cds-content-switcher-item\n                value=\"carbonified\"\n                data-selection=\"carbonified\"\n                @click=\"${showCarbonSpec}\">\n                Edit Carbon Spec\n              </cds-content-switcher-item>\n            </cds-content-switcher>\n          </div>\n          <div class=\"${clabsPrefix}--chat-editor-modal-code-container\">\n          ${\n            !editedContent || !_visualizationSpec\n              ? ''\n              : html`\n                  ${editOriginalSpecification\n                    ? html`\n                        <clabs-chat-code\n                          editable\n                          max-height=\"calc(100vh - 186px)\"\n                          debug\n                          @on-code-edit-change=\"${handleLiveRawEditorChange}\"\n                          @on-code-edit-validation=\"${handleOriginalEditorValidation}\"\n                          content=\"${JSON.stringify(\n                            JSON.parse(editedContent),\n                            null,\n                            '\\t'\n                          )}\">\n                        </clabs-chat-code>\n                      `\n                    : html`\n                        <clabs-chat-code\n                          editable\n                          max-height=\"calc(100vh - 186px)\"\n                          @on-code-edit-change=\"${handleLiveCarbonEditorChange}\"\n                          @on-code-edit-validation=\"${handleCarbonEditorValidation}\"\n                          content=\"${JSON.stringify(\n                            lightenSpec(_visualizationSpec),\n                            null,\n                            '\\t'\n                          )}\">\n                        </clabs-chat-code>\n                      `}\n                `\n          }\n          </div>\n        </div>\n      </div>\n    </div>`\n      : html``}\n    ${exportedImageURL\n      ? html`\n          <div\n            class=\"${clabsPrefix}--chat-chart-thumbnail-container\"\n            @mouseout=\"${handleMouseOut}\"\n            @mouseover=\"${handleMouseOver}\">\n            <img src=\"${exportedImageURL}\" />\n          </div>\n        `\n      : html`\n          ${_visualizationSpec && !errorMessage && !streaming\n            ? html` <div\n                @click=\"${chartClicked}\"\n                class=\"${clabsPrefix}--chat-chart-container\"\n                id=\"${clabsPrefix}--chat-chart-embed-vis-${uniqueID}\"></div>`\n            : html` <div class=\"${clabsPrefix}--chat-chart-container\">\n                <div class=\"${clabsPrefix}--chat-chart-loading-container\">\n                  ${errorMessage\n                    ? html` <div class=\"${clabsPrefix}--chat-chart-error-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-error-text\">\n                          ${debugMode\n                            ? errorMessage\n                            : 'Chart failed to render, see console for more details.'}\n                          <br />\n                          <br />\n                          ${debugMode\n                            ? html` <cds-button\n                                kind=\"danger--tertiary\"\n                                aria-label=\"Open Code Viewer\"\n                                role=\"button\"\n                                size=\"sm\"\n                                tooltip-position=\"left\"\n                                tooltip-alignment=\"end\"\n                                tooltip-position=\"left\"\n                                tooltip-text=\"Investigate in editor\"\n                                @click=\"${openCodeView}\">\n                                ${Launch16({ slot: 'icon' })} View in charts\n                                editor\n                              </cds-button>`\n                            : html``}\n                          <br />\n                          ${debugMode\n                            ? html` <cds-button\n                                kind=\"danger--tertiary\"\n                                aria-label=\"Open Vega Viewer\"\n                                role=\"button\"\n                                size=\"sm\"\n                                tooltip-position=\"left\"\n                                tooltip-alignment=\"end\"\n                                tooltip-position=\"left\"\n                                tooltip-text=\"Investigate in editor\"\n                                @click=\"${openEditorView}\">\n                                ${Launch16({ slot: 'icon' })} View in Vega\n                                editor\n                              </cds-button>`\n                            : html``}\n                        </div>`\n                    : html` <div\n                          class=\"${clabsPrefix}--chat-chart-loading-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-loading-text\">\n                          ${content}\n                        </div>`}\n                </div>\n              </div>`}\n        `}\n    ${disableOptions || errorMessage || chartLoading || streaming\n      ? html``\n      : html` <div\n          class=\"${clabsPrefix}--chat-chart-options\"\n          @mouseover=\"${handleMouseOver}\"\n          style=\"visibility:${thumbNail && !isHovered ? 'hidden' : 'visible'};\">\n          <div class=\"${clabsPrefix}--chat-chart-options-prefade\">&nbsp;</div>\n          <div class=\"${clabsPrefix}--chat-chart-options-buttons\">\n            ${!disableExport\n              ? html`\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Export Chart PNG\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${exportToImage}\">\n                    ${Download16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Export to PNG</span>\n                  </cds-icon-button>\n                `\n              : html``}\n            ${enableContext\n              ? html`\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Make latest Chart\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${appendToContext}\">\n                    ${ViewNext16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Make latest chart</span>\n                  </cds-icon-button>\n                `\n              : html``}\n            ${enableContext\n              ? html`\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Make latest Chart\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${appendToContext}\">\n                    ${ViewNext16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Make latest chart</span>\n                  </cds-icon-button>\n                `\n              : html``}\n            ${!disableEditor && debugMode\n              ? html`\n                  <cds-icon-button\n                    aria-label=\"Open in external Vega editor\"\n                    role=\"button\"\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    align=\"bottom-right\"\n                    @click=\"${openEditorView}\">\n                    ${Launch16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Open in Vega editor</span>\n                  </cds-icon-button>\n                `\n              : html``}\n            ${!disableCodeInspector\n              ? html`\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Inspect and Edit Specification\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${openCodeView}\">\n                    ${Code16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Show specification</span>\n                  </cds-icon-button>\n                `\n              : html``}\n            ${!disableFullscreen\n              ? html`\n                  <cds-icon-button\n                    aria-label=\"View in Fullscreen\"\n                    role=\"button\"\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    align=\"bottom-right\"\n                    @click=\"${openFullscreenView}\">\n                    ${Maximize16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Fullscreen</span>\n                  </cds-icon-button>\n                `\n              : html``}\n          </div>\n        </div>`}\n  `;\n}\n","/**\n * @license\n *\n * Copyright IBM Corp. 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { html } from 'lit';\nimport { settings } from '@carbon-labs/utilities/es/settings/index.js';\nconst { stablePrefix: clabsPrefix } = settings;\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport '../../errorElement/errorElement.js';\nimport '@carbon/web-components/es/components/button/index.js';\nimport '@carbon/web-components/es/components/icon-button/index.js';\nimport '@carbon/web-components/es/components/modal/index.js';\nimport '@carbon/web-components/es/components/checkbox/index.js';\nimport '@carbon/web-components/es/components/content-switcher/index.js';\nimport '../../codeElement/codeElement.js';\nimport Maximize16 from '@carbon/web-components/es/icons/maximize/16.js';\nimport Download16 from '@carbon/web-components/es/icons/download/16.js';\nimport Launch16 from '@carbon/web-components/es/icons/launch/16.js';\nimport Code16 from '@carbon/web-components/es/icons/code/16.js';\nimport Close16 from '@carbon/web-components/es/icons/close/16.js';\nimport ViewNext16 from '@carbon/web-components/es/icons/view-next/16.js';\n/**\n * Lit template for card\n *\n * @param {object} customElementClass Class functionality for the custom element\n * @returns {TemplateResult<1>} Lit html template\n */\nexport function chartElementTemplate(customElementClass) {\n    const { _errorMessage: errorMessage, chartLoading, content, debugMode, streaming, thumbNail, _buildLoader: buildLoader, _openFullscreenView: openFullscreenView, _exportToImage: exportToImage, _openCodeView: openCodeView, _handleLiveRawEditorChange: handleLiveRawEditorChange, _handleLiveCarbonEditorChange: handleLiveCarbonEditorChange, showModal, _openEditorView: openEditorView, closeModal, _lightenSpec: lightenSpec, _visualizationSpec, _editedContent: editedContent, disableOptions, disableEditor, disableExport, disableFullscreen, disableCodeInspector, _handleMouseOut: handleMouseOut, _handleMouseOver: handleMouseOver, _handleOriginalEditorValidation: handleOriginalEditorValidation, _handleCarbonEditorValidation: handleCarbonEditorValidation, modalMode, _uniqueID: uniqueID, editOriginalSpecification, _showOriginalSpec: showOriginalSpec, _showCarbonSpec: showCarbonSpec, isHovered, _enableContext: enableContext, _appendToContext: appendToContext, _chartClicked: chartClicked, exportedImageURL, _handleFullScreenScroll: handleFullScreenScroll, } = customElementClass;\n    return html `\n    ${showModal\n        ? html `\n          <div class=\"${clabsPrefix}--chat-chart-fullscreen-container-close\">\n            <cds-icon-button\n              kind=\"tertiary\"\n              aria-label=\"Close Fullscreen\"\n              role=\"button\"\n              align=\"bottom-right\"\n              @click=\"${closeModal}\">\n              ${Close16({ slot: 'icon' })}\n              <span slot=\"tooltip-content\">${'Close ' + modalMode}</span>\n            </cds-icon-button>\n          </div>\n        `\n        : html ``}\n    ${content\n        ? html `\n    <div class=\"${clabsPrefix}--chat-chart-fullscreen-container\" @wheel=\n          \"${handleFullScreenScroll}\" style=\"display:${modalMode === 'fullscreen' ? 'flex' : 'none'};\">\n\n      <div\n          class=\"${clabsPrefix}--chat-chart-modal-container\" id=\"${clabsPrefix}--chat-chart-fullscreen-embed-vis-${uniqueID}\">\n\n      </div>\n    </div>\n\n    <div class=\"${clabsPrefix}--chat-chart-fullscreen-container\" style=\"display:${modalMode === 'edit' ? 'flex' : 'none'};\">\n\n      ${chartLoading || errorMessage\n            ? html `\n              <div class=\"${clabsPrefix}--chat-editor-modal-section-chart\">\n                <div class=\"${clabsPrefix}--chat-chart-loading-container\">\n                  ${errorMessage\n                ? html ` <div class=\"${clabsPrefix}--chat-chart-error-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-error-text\">\n                          ${errorMessage}\n                        </div>`\n                : html ` <div\n                        class=\"${clabsPrefix}--chat-chart-loading-grid\">\n                        ${unsafeHTML(buildLoader())}\n                      </div>`}\n                </div>\n              </div>\n            `\n            : html ` <div\n              class=\"${clabsPrefix}--chat-editor-modal-section-chart\"\n              id=\"${clabsPrefix}--chat-chart-editor-embed-vis-${uniqueID}\"></div>`}\n\n\n        <div class=\"${clabsPrefix}--chat-editor-modal-section-code\">\n          <div class=\"${clabsPrefix}--chat-editor-modal-header\">\n            <cds-content-switcher value=\"carbonified\">\n              <cds-content-switcher-item\n                value=\"original\"\n                selected\n                data-selection=\"original\"\n                @click=\"${showOriginalSpec}\">\n                Edit Original Spec\n              </cds-content-switcher-item>\n              <cds-content-switcher-item\n                value=\"carbonified\"\n                data-selection=\"carbonified\"\n                @click=\"${showCarbonSpec}\">\n                Edit Carbon Spec\n              </cds-content-switcher-item>\n            </cds-content-switcher>\n          </div>\n          <div class=\"${clabsPrefix}--chat-editor-modal-code-container\">\n          ${!editedContent || !_visualizationSpec\n            ? ''\n            : html `\n                  ${editOriginalSpecification\n                ? html `\n                        <clabs-chat-code\n                          editable\n                          max-height=\"calc(100vh - 186px)\"\n                          debug\n                          @on-code-edit-change=\"${handleLiveRawEditorChange}\"\n                          @on-code-edit-validation=\"${handleOriginalEditorValidation}\"\n                          content=\"${JSON.stringify(JSON.parse(editedContent), null, '\\t')}\">\n                        </clabs-chat-code>\n                      `\n                : html `\n                        <clabs-chat-code\n                          editable\n                          max-height=\"calc(100vh - 186px)\"\n                          @on-code-edit-change=\"${handleLiveCarbonEditorChange}\"\n                          @on-code-edit-validation=\"${handleCarbonEditorValidation}\"\n                          content=\"${JSON.stringify(lightenSpec(_visualizationSpec), null, '\\t')}\">\n                        </clabs-chat-code>\n                      `}\n                `}\n          </div>\n        </div>\n      </div>\n    </div>`\n        : html ``}\n    ${exportedImageURL\n        ? html `\n          <div\n            class=\"${clabsPrefix}--chat-chart-thumbnail-container\"\n            @mouseout=\"${handleMouseOut}\"\n            @mouseover=\"${handleMouseOver}\">\n            <img src=\"${exportedImageURL}\" />\n          </div>\n        `\n        : html `\n          ${_visualizationSpec && !errorMessage && !streaming\n            ? html ` <div\n                @click=\"${chartClicked}\"\n                class=\"${clabsPrefix}--chat-chart-container\"\n                id=\"${clabsPrefix}--chat-chart-embed-vis-${uniqueID}\"></div>`\n            : html ` <div class=\"${clabsPrefix}--chat-chart-container\">\n                <div class=\"${clabsPrefix}--chat-chart-loading-container\">\n                  ${errorMessage\n                ? html ` <div class=\"${clabsPrefix}--chat-chart-error-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-error-text\">\n                          ${debugMode\n                    ? errorMessage\n                    : 'Chart failed to render, see console for more details.'}\n                          <br />\n                          <br />\n                          ${debugMode\n                    ? html ` <cds-button\n                                kind=\"danger--tertiary\"\n                                aria-label=\"Open Code Viewer\"\n                                role=\"button\"\n                                size=\"sm\"\n                                tooltip-position=\"left\"\n                                tooltip-alignment=\"end\"\n                                tooltip-position=\"left\"\n                                tooltip-text=\"Investigate in editor\"\n                                @click=\"${openCodeView}\">\n                                ${Launch16({ slot: 'icon' })} View in charts\n                                editor\n                              </cds-button>`\n                    : html ``}\n                          <br />\n                          ${debugMode\n                    ? html ` <cds-button\n                                kind=\"danger--tertiary\"\n                                aria-label=\"Open Vega Viewer\"\n                                role=\"button\"\n                                size=\"sm\"\n                                tooltip-position=\"left\"\n                                tooltip-alignment=\"end\"\n                                tooltip-position=\"left\"\n                                tooltip-text=\"Investigate in editor\"\n                                @click=\"${openEditorView}\">\n                                ${Launch16({ slot: 'icon' })} View in Vega\n                                editor\n                              </cds-button>`\n                    : html ``}\n                        </div>`\n                : html ` <div\n                          class=\"${clabsPrefix}--chat-chart-loading-grid\">\n                          ${unsafeHTML(buildLoader())}\n                        </div>\n                        <div class=\"${clabsPrefix}--chat-chart-loading-text\">\n                          ${content}\n                        </div>`}\n                </div>\n              </div>`}\n        `}\n    ${disableOptions || errorMessage || chartLoading || streaming\n        ? html ``\n        : html ` <div\n          class=\"${clabsPrefix}--chat-chart-options\"\n          @mouseover=\"${handleMouseOver}\"\n          style=\"visibility:${thumbNail && !isHovered ? 'hidden' : 'visible'};\">\n          <div class=\"${clabsPrefix}--chat-chart-options-prefade\">&nbsp;</div>\n          <div class=\"${clabsPrefix}--chat-chart-options-buttons\">\n            ${!disableExport\n            ? html `\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Export Chart PNG\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${exportToImage}\">\n                    ${Download16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Export to PNG</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n            ${enableContext\n            ? html `\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Make latest Chart\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${appendToContext}\">\n                    ${ViewNext16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Make latest chart</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n            ${enableContext\n            ? html `\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Make latest Chart\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${appendToContext}\">\n                    ${ViewNext16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Make latest chart</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n            ${!disableEditor && debugMode\n            ? html `\n                  <cds-icon-button\n                    aria-label=\"Open in external Vega editor\"\n                    role=\"button\"\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    align=\"bottom-right\"\n                    @click=\"${openEditorView}\">\n                    ${Launch16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Open in Vega editor</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n            ${!disableCodeInspector\n            ? html `\n                  <cds-icon-button\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    aria-label=\"Inspect and Edit Specification\"\n                    role=\"button\"\n                    align=\"bottom-right\"\n                    @click=\"${openCodeView}\">\n                    ${Code16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Show specification</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n            ${!disableFullscreen\n            ? html `\n                  <cds-icon-button\n                    aria-label=\"View in Fullscreen\"\n                    role=\"button\"\n                    kind=\"ghost\"\n                    size=\"sm\"\n                    align=\"bottom-right\"\n                    @click=\"${openFullscreenView}\">\n                    ${Maximize16({ slot: 'icon' })}\n                    <span slot=\"tooltip-content\">Fullscreen</span>\n                  </cds-icon-button>\n                `\n            : html ``}\n          </div>\n        </div>`}\n  `;\n}\n"]}