{"version":3,"sources":["components/popupElement/src/popupElement.ts","components/popupElement/src/popupElement.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","LitElement","property","state","styles","popupElement","constructor","popupTitle","disclaimer","promptTitle","_textInput","_tagSelections","invalidEntry","enableDataCollectionCheck","_renderLabel","customValue","labels","customLabels","firstUpdated","_a","style","setProperty","inlinePosition","blockPosition","feedbackFormValues","_setValues","type","offset","compactMode","isSlotted","container","shadowRoot","querySelector","HTMLElement","focus","_setPosition","_handleEscape","event","_handleClose","_handleEscapeB","setPosition","targetElement","targetBounds","getBoundingClientRect","popupBounds","parentBounds","parentElement","offsetLeft","left","offsetTop","bottom","top","width","height","refitPosition","right","_handleTextInput","value","_checkValidity","selectionLength","keys","invalidSubmit","collectionAgreement","updated","changedProperties","has","isOpen","updateComplete","_handleCheckBoxChange","_event","detail","checked","values","title","textAreaPlaceholder","responsePlaceholder","prompt","tagList","tags","description","listTitle","listItems","disableTextArea","radioButtons","radioTitle","model","dataCollectionTitle","requestUpdate","setTimeout","_b","_c","_d","parentValues","feedbackHeight","scrollHeight","parentHeight","horizontalPosition","verticalPosition","orientation","_handleSubmit","feedbackDetails","formValues","userComment","parentMessageId","tagSelections","complexFeedbackSubmission","CustomEvent","bubbles","composed","dispatchEvent","closePopupEvent","action","success","SVGElement","handleTagSelection","selections","selectionList","preventDefault","attribute","reflect","prototype","Boolean","String"],"mappings":"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","file":"popupElement.js","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement } from 'lit';\nimport { property, state } from 'lit/decorators.js';\n\n// @ts-ignore\nimport styles from './popupElement.scss?inline';\n/**\n * Input component using search typeahead api\n */\nexport default class popupElement extends LitElement {\n  static styles = styles;\n  /**\n   * Array of subelements parsed from API reply\n   */\n  @property({ type: Object, attribute: 'popup-elements', reflect: true })\n  popupElements;\n\n  /**\n   * horizontal position defined by parent\n   */\n  @property({ type: Object, attribute: 'inline-position' })\n  inlinePosition;\n\n  /**\n   * vertical position defined by parent relative to message parent\n   */\n  @property({ type: Object, attribute: 'block-position' })\n  blockPosition;\n\n  /**\n   * top level title for section\n   */\n  @property({ type: Boolean, attribute: 'is-slotted' })\n  isSlotted;\n\n  /**\n   * top level title for section\n   */\n  @property({ type: String, attribute: 'popup-title' })\n  popupTitle = 'placeholder title';\n\n  /**\n   * array definition of tags to select\n   */\n  @property({ type: Object, attribute: 'tag-list' })\n  tagList;\n\n  /**\n   * legal disclaimer text\n   */\n  @property({ type: String, attribute: 'disclaimer' })\n  disclaimer = 'placeholder disclaimer';\n\n  /**\n   * question asked of user to give feedback\n   */\n  @property({ type: String, attribute: 'prompt-title' })\n  promptTitle = 'placeholder prompt';\n\n  /**\n   * placeholder in text area\n   */\n  @property({ type: String, attribute: 'text-area-placeholder' })\n  textAreaPlaceholder;\n\n  /**\n   * boolean determining to auto-open or not\n   */\n  @property({ type: Boolean, attribute: 'is-open' })\n  isOpen;\n\n  /**\n   * optional orientation value to show caret\n   */\n  @property({ type: String, attribute: 'orientation', reflect: true })\n  orientation;\n\n  /**\n   * target div to attach to\n   */\n  @property({ type: Object, attribute: 'targetElement' })\n  targetElement;\n\n  /**\n   * radio button array\n   */\n  @property({ type: Object, attribute: 'radioButtons' })\n  radioButtons;\n\n  /**\n   * radio title\n   */\n  @property({ type: String, attribute: 'radio-title' })\n  radioTitle;\n\n  /**\n   * predefined JSON values of all above by dev/user\n   */\n  @property({ type: Object, attribute: 'feedbackFormValues' })\n  feedbackFormValues;\n\n  /**\n   * top description\n   */\n  @property({ type: String, attribute: 'description' })\n  description;\n\n  /** title of list, requires show-list\n   */\n  @property({ type: String, attribute: 'list-title' })\n  listTitle;\n\n  /** whether to show list\n   */\n  @property({ type: Boolean, attribute: 'show-list' })\n  showList;\n\n  /** whether to show text area\n   */\n  @property({ type: Boolean, attribute: 'disable-text-area' })\n  disableTextArea;\n\n  /**\n   * array of list items with title and text content\n   */\n  @property({ type: Object, attribute: 'listItems' })\n  listItems;\n\n  /**\n   * model object with title and url\n   */\n  @property({ type: Object, attribute: 'model' })\n  model;\n\n  /**\n   * internal saved text values for feedback\n   */\n  @state()\n  _textInput = '';\n\n  /**\n   * internal tag seelction list\n   */\n  @state()\n  _tagSelections = {};\n\n  /**\n   * response type i.e positive nbegative custom etc\n   */\n  @property({ type: String, attribute: 'type' })\n  type;\n\n  /**\n   * index of message element in message list\n   */\n  @property({ type: String, attribute: 'parent-message-id' })\n  parentMessageId;\n\n  /**\n   * compact mode\n   */\n  @property({ type: Boolean, attribute: 'compact-mode' })\n  compactMode;\n\n  /**\n   * check if submission is valid\n   */\n  @state()\n  invalidEntry = true;\n\n  /**\n   * custom label presets\n   */\n  @property({ type: Object, attribute: 'customLabels' })\n  customLabels;\n\n  /**\n   * enable data =collection checkbox area\n   */\n  @property({ type: Boolean, attribute: 'enable-data-collection-check' })\n  enableDataCollectionCheck = false;\n\n  /** require title for checkbox title\n   */\n  @property({ type: String, attribute: 'data-collection-title' })\n  dataCollectionTitle;\n\n  /** check for collection agreement to enable submit button\n   */\n  @state()\n  collectionAgreement;\n\n  /**\n   * Event listener to check if parent visibility changed\n   */\n  //private intersectionObserver;\n\n  /**\n   * Event listener to check if parent visibility changed\n   */\n  //private resizeObserver;\n\n  /** detect when component is rendered to process rawtext\n   */\n  firstUpdated() {\n    this.style.setProperty(\n      '--chat-popup-element-inline-position',\n      this.inlinePosition\n    );\n    this.style.setProperty(\n      '--chat-popup-element-block-position',\n      this.blockPosition\n    );\n    if (this.feedbackFormValues) {\n      this._setValues(this.feedbackFormValues);\n    }\n    if (this.type === 'thumbs-up') {\n      const offset = this.compactMode ? -8 : -2;\n\n      this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n    }\n    if (this.type === 'thumbs-down') {\n      const offset = this.compactMode ? 46 : 34;\n      this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n    }\n\n    if (this.isSlotted) {\n      this.style.setProperty('--chat-popup-slotted-mode', 'fixed');\n    }\n\n    const container = this.shadowRoot?.querySelector(\n      '.clabs--chat-popup-container'\n    );\n    if (container instanceof HTMLElement) {\n      container.focus();\n    }\n    this._setPosition();\n\n    //this.addEventListener('on-messages-scrolled', this._handleScrollChange)\n\n    /*this.resizeObserver = new ResizeObserver(()=>{\n      this.setPosition();\n    })\n    this.resizeObserver.observe(this.targetElement);*/\n\n    /*this.intersectionObserver = new IntersectionObserver((entries)=>{\n      entries.forEach((entry) =>{\n        if(!entry.isIntersecting){\n          //this.refitPosition();\n          console.log(\"inter\")\n        }\n      })\n    })\n    this.intersectionObserver.observe(this);*/\n  }\n\n  /** handle when users escapes\n   * @param {event} event - key event on popup\n   */\n  _handleEscape(event) {\n    if (event.key === 'Escape') {\n      this._handleClose(event);\n    }\n  }\n\n  /** handle when users escapes\n   * @param {event} event - key event on popup\n   */\n  _handleEscapeB(event) {\n    if (event.key === 'Tab') {\n      this._handleClose(event);\n    }\n  }\n\n  /**\n   * setPosition -  place popup according to client positioning of target element\n   */\n  setPosition() {\n    if (this.targetElement instanceof HTMLElement) {\n      const targetBounds = this.targetElement.getBoundingClientRect();\n      const popupBounds = this.getBoundingClientRect();\n      const parentBounds = this.parentElement?.getBoundingClientRect();\n\n      if (targetBounds && popupBounds && parentBounds) {\n        let offsetLeft = targetBounds.left - parentBounds.left;\n        let offsetTop = targetBounds.bottom - parentBounds.top;\n\n        if (targetBounds.left + popupBounds.width > parentBounds.width) {\n          offsetLeft = parentBounds.width - popupBounds.width - 10;\n        }\n\n        if (offsetTop + popupBounds.height > parentBounds.height) {\n          offsetTop = targetBounds.top - parentBounds.top - popupBounds.height;\n        }\n\n        this.inlinePosition = offsetLeft;\n\n        this.blockPosition = offsetTop;\n      }\n    }\n  }\n\n  /**\n   * refitPosition - animate/move popup according to client events and target element\n   */\n  refitPosition() {\n    if (this.parentElement instanceof HTMLElement) {\n      const popupBounds = this.getBoundingClientRect();\n      const parentBounds = this.parentElement?.getBoundingClientRect();\n\n      const offsetLeft = parentBounds.width - popupBounds.width - 10;\n      const offsetTop = parentBounds.height - parentBounds.height - 10;\n      if (popupBounds.right > parentBounds.right) {\n        this.inlinePosition = offsetLeft;\n      } else if (popupBounds.left < parentBounds.left) {\n        this.inlinePosition = 10;\n      }\n\n      if (popupBounds.bottom > parentBounds.bottom) {\n        this.blockPosition = offsetTop;\n      } else if (popupBounds.top < parentBounds.top) {\n        this.blockPosition = 10;\n      }\n    }\n  }\n\n  /** _handleTextInput - handle text change in submission\n   * @param {event} event -  textarea change event\n   */\n  _handleTextInput(event) {\n    const { value } = event.target;\n    this._textInput = value;\n    this._checkValidity();\n  }\n\n  /** _checkValidity\n   */\n  _checkValidity() {\n    const selectionLength = Object.keys(this._tagSelections).length;\n    let invalidSubmit = false;\n\n    if (!this._textInput && selectionLength <= 0) {\n      invalidSubmit = true;\n    }\n\n    if (this.enableDataCollectionCheck && !this.collectionAgreement) {\n      invalidSubmit = true;\n    }\n    this.invalidEntry = invalidSubmit;\n  }\n\n  /**\n   * updated - check changed properties\n   * @param {object} changedProperties - LIT object denoting changed attributes\n   */\n  async updated(changedProperties) {\n    if (changedProperties.has('inlinePosition')) {\n      this.style.setProperty(\n        '--chat-popup-element-inline-position',\n        this.inlinePosition + 'px'\n      );\n    }\n    if (changedProperties.has('blockPosition')) {\n      this.style.setProperty(\n        '--chat-popup-element-block-position',\n        this.blockPosition + 'px'\n      );\n    }\n    if (changedProperties.has('isOpen')) {\n      this.style.setProperty(\n        '--chat-popup-element-visibility',\n        this.isOpen ? 'visible' : 'hidden'\n      );\n    }\n    if (changedProperties.has('feedbackFormValues')) {\n      this._setValues(this.feedbackFormValues);\n      await this.updateComplete;\n      this._setPosition();\n    }\n\n    if (this.type === 'thumbs-up') {\n      const offset = this.compactMode ? 12 : -2;\n\n      this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n    }\n    if (this.type === 'thumbs-down') {\n      const offset = this.compactMode ? 48 : 34;\n      this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n    }\n  }\n\n  /**\n   * _handleCheckBoxChange - see if checkbox modifed\n   * @param {event} _event - checbox event\n   */\n  _handleCheckBoxChange(_event) {\n    if (_event?.detail?.checked) {\n      this.collectionAgreement = true;\n    } else {\n      this.collectionAgreement = false;\n    }\n    this._checkValidity();\n  }\n\n  /**\n   * _setValues -  if preset Object is added, update all display values\n   * @param {object} values - defined values\n   */\n  _setValues(values) {\n    this.popupTitle = values.title;\n    this.textAreaPlaceholder = values.responsePlaceholder;\n    this.promptTitle = values.prompt;\n    this.tagList = values.tags;\n    this.disclaimer = values.disclaimer;\n    this.description = values.description;\n    this.listTitle = values.listTitle;\n    this.listItems = values.listItems;\n    this.disableTextArea = values.disableTextArea;\n    this.radioButtons = values.radioButtons;\n    this.radioTitle = values.radioTitle;\n    this.model = values.model;\n    this.enableDataCollectionCheck = values.enableDataCollectionCheck;\n    this.dataCollectionTitle = values.dataCollectionTitle;\n    this.requestUpdate();\n  }\n  /**\n   * _setPosition - place div next to target\n   */\n  _setPosition() {\n    this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n    setTimeout(() => {\n      this.style.setProperty('--chat-popup-element-visibility', 'visible');\n      const offsetTop = this.feedbackFormValues?.parentValues?.offsetTop;\n      const feedbackHeight = this.scrollHeight;\n\n      const parentHeight =\n        this.feedbackFormValues?.parentValues?.scrollHeight || 0;\n      let horizontalPosition = 54;\n      let verticalPosition = 60;\n      let orientation = 'top';\n\n      if (\n        parentHeight - feedbackHeight > offsetTop ||\n        feedbackHeight > offsetTop\n      ) {\n        verticalPosition = -feedbackHeight;\n        orientation = 'bottom';\n      }\n\n      if (this.compactMode) {\n        horizontalPosition = 0;\n      }\n\n      this.inlinePosition = horizontalPosition;\n      this.blockPosition = verticalPosition;\n      this.orientation = orientation;\n    }, 100);\n  }\n\n  /**\n   * _handleSubmit - submit event when submit button click\n   * @param {event} event - button click event\n   */\n  _handleSubmit() {\n    const feedbackDetails = {\n      type: this.type ? this.type : 'unknown',\n      formValues: this.feedbackFormValues,\n      userComment: this._textInput ? this._textInput : 'no feedback given',\n      parentMessageId: this.parentMessageId ? this.parentMessageId : 'unknown',\n      tagSelections: this._tagSelections,\n    };\n    const complexFeedbackSubmission = new CustomEvent(\n      'on-user-complex-feedback-request',\n      {\n        detail: feedbackDetails,\n        bubbles: true,\n        composed: true,\n      }\n    );\n    this.dispatchEvent(complexFeedbackSubmission);\n    this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n    const closePopupEvent = new CustomEvent('on-feedback-popup-closed', {\n      detail: {\n        action: 'Closed Feedback Popup after valid submit',\n        success: true,\n      },\n      bubbles: true,\n      composed: true,\n    });\n    if (\n      this.targetElement instanceof HTMLElement ||\n      this.targetElement instanceof SVGElement\n    ) {\n      this.targetElement.focus();\n    }\n    this.dispatchEvent(closePopupEvent);\n  }\n\n  /**\n   * handleTagSelection - handle when tag list subelement sends seelction signal\n   * @param {event} event -  tag click event\n   */\n  handleTagSelection(event) {\n    const selections = event.detail.selectionList;\n    this._tagSelections = selections;\n    this._checkValidity();\n  }\n\n  /**\n   * closing event when close button is selected\n   * @param {event} event - clsing button event\n   */\n  _handleClose(event) {\n    event.preventDefault();\n    this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n    const closePopupEvent = new CustomEvent('on-feedback-popup-closed', {\n      detail: { action: 'Closed Feedback Popup', success: false },\n      bubbles: true,\n      composed: true,\n    });\n    if (\n      this.targetElement instanceof HTMLElement ||\n      this.targetElement instanceof SVGElement\n    ) {\n      this.targetElement.focus();\n    }\n    this.dispatchEvent(closePopupEvent);\n    this.requestUpdate();\n  }\n\n  /**\n   * _renderLabel - render default or custom label\n   * @param {string} key - dictionary key for label\n   */\n  _renderLabel = (key) => {\n    let customValue;\n    const labels = this.customLabels || {};\n    if (labels) {\n      switch (key) {\n        case 'feedback-submit-button':\n          customValue = labels[key] || 'Submit';\n          break;\n        case 'feedback-submit-button-unavailable':\n          customValue = labels[key] || 'Submit';\n          break;\n        case 'feedback-close':\n          customValue = labels[key] || 'Close';\n          break;\n      }\n    }\n    return customValue || key;\n  };\n}\n","/**\n * @license\n *\n * Copyright IBM Corp. 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement } from 'lit';\nimport { property, state } from 'lit/decorators.js';\n// @ts-ignore\nimport styles from './popupElement.scss?inline';\n/**\n * Input component using search typeahead api\n */\nclass popupElement extends LitElement {\n    constructor() {\n        super(...arguments);\n        /**\n         * top level title for section\n         */\n        this.popupTitle = 'placeholder title';\n        /**\n         * legal disclaimer text\n         */\n        this.disclaimer = 'placeholder disclaimer';\n        /**\n         * question asked of user to give feedback\n         */\n        this.promptTitle = 'placeholder prompt';\n        /**\n         * internal saved text values for feedback\n         */\n        this._textInput = '';\n        /**\n         * internal tag seelction list\n         */\n        this._tagSelections = {};\n        /**\n         * check if submission is valid\n         */\n        this.invalidEntry = true;\n        /**\n         * enable data =collection checkbox area\n         */\n        this.enableDataCollectionCheck = false;\n        /**\n         * _renderLabel - render default or custom label\n         * @param {string} key - dictionary key for label\n         */\n        this._renderLabel = (key) => {\n            let customValue;\n            const labels = this.customLabels || {};\n            if (labels) {\n                switch (key) {\n                    case 'feedback-submit-button':\n                        customValue = labels[key] || 'Submit';\n                        break;\n                    case 'feedback-submit-button-unavailable':\n                        customValue = labels[key] || 'Submit';\n                        break;\n                    case 'feedback-close':\n                        customValue = labels[key] || 'Close';\n                        break;\n                }\n            }\n            return customValue || key;\n        };\n    }\n    /**\n     * Event listener to check if parent visibility changed\n     */\n    //private intersectionObserver;\n    /**\n     * Event listener to check if parent visibility changed\n     */\n    //private resizeObserver;\n    /** detect when component is rendered to process rawtext\n     */\n    firstUpdated() {\n        var _a;\n        this.style.setProperty('--chat-popup-element-inline-position', this.inlinePosition);\n        this.style.setProperty('--chat-popup-element-block-position', this.blockPosition);\n        if (this.feedbackFormValues) {\n            this._setValues(this.feedbackFormValues);\n        }\n        if (this.type === 'thumbs-up') {\n            const offset = this.compactMode ? -8 : -2;\n            this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n        }\n        if (this.type === 'thumbs-down') {\n            const offset = this.compactMode ? 46 : 34;\n            this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n        }\n        if (this.isSlotted) {\n            this.style.setProperty('--chat-popup-slotted-mode', 'fixed');\n        }\n        const container = (_a = this.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('.clabs--chat-popup-container');\n        if (container instanceof HTMLElement) {\n            container.focus();\n        }\n        this._setPosition();\n        //this.addEventListener('on-messages-scrolled', this._handleScrollChange)\n        /*this.resizeObserver = new ResizeObserver(()=>{\n          this.setPosition();\n        })\n        this.resizeObserver.observe(this.targetElement);*/\n        /*this.intersectionObserver = new IntersectionObserver((entries)=>{\n          entries.forEach((entry) =>{\n            if(!entry.isIntersecting){\n              //this.refitPosition();\n              console.log(\"inter\")\n            }\n          })\n        })\n        this.intersectionObserver.observe(this);*/\n    }\n    /** handle when users escapes\n     * @param {event} event - key event on popup\n     */\n    _handleEscape(event) {\n        if (event.key === 'Escape') {\n            this._handleClose(event);\n        }\n    }\n    /** handle when users escapes\n     * @param {event} event - key event on popup\n     */\n    _handleEscapeB(event) {\n        if (event.key === 'Tab') {\n            this._handleClose(event);\n        }\n    }\n    /**\n     * setPosition -  place popup according to client positioning of target element\n     */\n    setPosition() {\n        var _a;\n        if (this.targetElement instanceof HTMLElement) {\n            const targetBounds = this.targetElement.getBoundingClientRect();\n            const popupBounds = this.getBoundingClientRect();\n            const parentBounds = (_a = this.parentElement) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n            if (targetBounds && popupBounds && parentBounds) {\n                let offsetLeft = targetBounds.left - parentBounds.left;\n                let offsetTop = targetBounds.bottom - parentBounds.top;\n                if (targetBounds.left + popupBounds.width > parentBounds.width) {\n                    offsetLeft = parentBounds.width - popupBounds.width - 10;\n                }\n                if (offsetTop + popupBounds.height > parentBounds.height) {\n                    offsetTop = targetBounds.top - parentBounds.top - popupBounds.height;\n                }\n                this.inlinePosition = offsetLeft;\n                this.blockPosition = offsetTop;\n            }\n        }\n    }\n    /**\n     * refitPosition - animate/move popup according to client events and target element\n     */\n    refitPosition() {\n        var _a;\n        if (this.parentElement instanceof HTMLElement) {\n            const popupBounds = this.getBoundingClientRect();\n            const parentBounds = (_a = this.parentElement) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n            const offsetLeft = parentBounds.width - popupBounds.width - 10;\n            const offsetTop = parentBounds.height - parentBounds.height - 10;\n            if (popupBounds.right > parentBounds.right) {\n                this.inlinePosition = offsetLeft;\n            }\n            else if (popupBounds.left < parentBounds.left) {\n                this.inlinePosition = 10;\n            }\n            if (popupBounds.bottom > parentBounds.bottom) {\n                this.blockPosition = offsetTop;\n            }\n            else if (popupBounds.top < parentBounds.top) {\n                this.blockPosition = 10;\n            }\n        }\n    }\n    /** _handleTextInput - handle text change in submission\n     * @param {event} event -  textarea change event\n     */\n    _handleTextInput(event) {\n        const { value } = event.target;\n        this._textInput = value;\n        this._checkValidity();\n    }\n    /** _checkValidity\n     */\n    _checkValidity() {\n        const selectionLength = Object.keys(this._tagSelections).length;\n        let invalidSubmit = false;\n        if (!this._textInput && selectionLength <= 0) {\n            invalidSubmit = true;\n        }\n        if (this.enableDataCollectionCheck && !this.collectionAgreement) {\n            invalidSubmit = true;\n        }\n        this.invalidEntry = invalidSubmit;\n    }\n    /**\n     * updated - check changed properties\n     * @param {object} changedProperties - LIT object denoting changed attributes\n     */\n    async updated(changedProperties) {\n        if (changedProperties.has('inlinePosition')) {\n            this.style.setProperty('--chat-popup-element-inline-position', this.inlinePosition + 'px');\n        }\n        if (changedProperties.has('blockPosition')) {\n            this.style.setProperty('--chat-popup-element-block-position', this.blockPosition + 'px');\n        }\n        if (changedProperties.has('isOpen')) {\n            this.style.setProperty('--chat-popup-element-visibility', this.isOpen ? 'visible' : 'hidden');\n        }\n        if (changedProperties.has('feedbackFormValues')) {\n            this._setValues(this.feedbackFormValues);\n            await this.updateComplete;\n            this._setPosition();\n        }\n        if (this.type === 'thumbs-up') {\n            const offset = this.compactMode ? 12 : -2;\n            this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n        }\n        if (this.type === 'thumbs-down') {\n            const offset = this.compactMode ? 48 : 34;\n            this.style.setProperty('--chat-popup-caret-offset', offset + 'px');\n        }\n    }\n    /**\n     * _handleCheckBoxChange - see if checkbox modifed\n     * @param {event} _event - checbox event\n     */\n    _handleCheckBoxChange(_event) {\n        var _a;\n        if ((_a = _event === null || _event === void 0 ? void 0 : _event.detail) === null || _a === void 0 ? void 0 : _a.checked) {\n            this.collectionAgreement = true;\n        }\n        else {\n            this.collectionAgreement = false;\n        }\n        this._checkValidity();\n    }\n    /**\n     * _setValues -  if preset Object is added, update all display values\n     * @param {object} values - defined values\n     */\n    _setValues(values) {\n        this.popupTitle = values.title;\n        this.textAreaPlaceholder = values.responsePlaceholder;\n        this.promptTitle = values.prompt;\n        this.tagList = values.tags;\n        this.disclaimer = values.disclaimer;\n        this.description = values.description;\n        this.listTitle = values.listTitle;\n        this.listItems = values.listItems;\n        this.disableTextArea = values.disableTextArea;\n        this.radioButtons = values.radioButtons;\n        this.radioTitle = values.radioTitle;\n        this.model = values.model;\n        this.enableDataCollectionCheck = values.enableDataCollectionCheck;\n        this.dataCollectionTitle = values.dataCollectionTitle;\n        this.requestUpdate();\n    }\n    /**\n     * _setPosition - place div next to target\n     */\n    _setPosition() {\n        this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n        setTimeout(() => {\n            var _a, _b, _c, _d;\n            this.style.setProperty('--chat-popup-element-visibility', 'visible');\n            const offsetTop = (_b = (_a = this.feedbackFormValues) === null || _a === void 0 ? void 0 : _a.parentValues) === null || _b === void 0 ? void 0 : _b.offsetTop;\n            const feedbackHeight = this.scrollHeight;\n            const parentHeight = ((_d = (_c = this.feedbackFormValues) === null || _c === void 0 ? void 0 : _c.parentValues) === null || _d === void 0 ? void 0 : _d.scrollHeight) || 0;\n            let horizontalPosition = 54;\n            let verticalPosition = 60;\n            let orientation = 'top';\n            if (parentHeight - feedbackHeight > offsetTop ||\n                feedbackHeight > offsetTop) {\n                verticalPosition = -feedbackHeight;\n                orientation = 'bottom';\n            }\n            if (this.compactMode) {\n                horizontalPosition = 0;\n            }\n            this.inlinePosition = horizontalPosition;\n            this.blockPosition = verticalPosition;\n            this.orientation = orientation;\n        }, 100);\n    }\n    /**\n     * _handleSubmit - submit event when submit button click\n     * @param {event} event - button click event\n     */\n    _handleSubmit() {\n        const feedbackDetails = {\n            type: this.type ? this.type : 'unknown',\n            formValues: this.feedbackFormValues,\n            userComment: this._textInput ? this._textInput : 'no feedback given',\n            parentMessageId: this.parentMessageId ? this.parentMessageId : 'unknown',\n            tagSelections: this._tagSelections,\n        };\n        const complexFeedbackSubmission = new CustomEvent('on-user-complex-feedback-request', {\n            detail: feedbackDetails,\n            bubbles: true,\n            composed: true,\n        });\n        this.dispatchEvent(complexFeedbackSubmission);\n        this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n        const closePopupEvent = new CustomEvent('on-feedback-popup-closed', {\n            detail: {\n                action: 'Closed Feedback Popup after valid submit',\n                success: true,\n            },\n            bubbles: true,\n            composed: true,\n        });\n        if (this.targetElement instanceof HTMLElement ||\n            this.targetElement instanceof SVGElement) {\n            this.targetElement.focus();\n        }\n        this.dispatchEvent(closePopupEvent);\n    }\n    /**\n     * handleTagSelection - handle when tag list subelement sends seelction signal\n     * @param {event} event -  tag click event\n     */\n    handleTagSelection(event) {\n        const selections = event.detail.selectionList;\n        this._tagSelections = selections;\n        this._checkValidity();\n    }\n    /**\n     * closing event when close button is selected\n     * @param {event} event - clsing button event\n     */\n    _handleClose(event) {\n        event.preventDefault();\n        this.style.setProperty('--chat-popup-element-visibility', 'hidden');\n        const closePopupEvent = new CustomEvent('on-feedback-popup-closed', {\n            detail: { action: 'Closed Feedback Popup', success: false },\n            bubbles: true,\n            composed: true,\n        });\n        if (this.targetElement instanceof HTMLElement ||\n            this.targetElement instanceof SVGElement) {\n            this.targetElement.focus();\n        }\n        this.dispatchEvent(closePopupEvent);\n        this.requestUpdate();\n    }\n}\npopupElement.styles = styles;\nexport default popupElement;\n__decorate([\n    property({ type: Object, attribute: 'popup-elements', reflect: true })\n], popupElement.prototype, \"popupElements\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'inline-position' })\n], popupElement.prototype, \"inlinePosition\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'block-position' })\n], popupElement.prototype, \"blockPosition\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'is-slotted' })\n], popupElement.prototype, \"isSlotted\", void 0);\n__decorate([\n    property({ type: String, attribute: 'popup-title' })\n], popupElement.prototype, \"popupTitle\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'tag-list' })\n], popupElement.prototype, \"tagList\", void 0);\n__decorate([\n    property({ type: String, attribute: 'disclaimer' })\n], popupElement.prototype, \"disclaimer\", void 0);\n__decorate([\n    property({ type: String, attribute: 'prompt-title' })\n], popupElement.prototype, \"promptTitle\", void 0);\n__decorate([\n    property({ type: String, attribute: 'text-area-placeholder' })\n], popupElement.prototype, \"textAreaPlaceholder\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'is-open' })\n], popupElement.prototype, \"isOpen\", void 0);\n__decorate([\n    property({ type: String, attribute: 'orientation', reflect: true })\n], popupElement.prototype, \"orientation\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'targetElement' })\n], popupElement.prototype, \"targetElement\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'radioButtons' })\n], popupElement.prototype, \"radioButtons\", void 0);\n__decorate([\n    property({ type: String, attribute: 'radio-title' })\n], popupElement.prototype, \"radioTitle\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'feedbackFormValues' })\n], popupElement.prototype, \"feedbackFormValues\", void 0);\n__decorate([\n    property({ type: String, attribute: 'description' })\n], popupElement.prototype, \"description\", void 0);\n__decorate([\n    property({ type: String, attribute: 'list-title' })\n], popupElement.prototype, \"listTitle\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'show-list' })\n], popupElement.prototype, \"showList\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'disable-text-area' })\n], popupElement.prototype, \"disableTextArea\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'listItems' })\n], popupElement.prototype, \"listItems\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'model' })\n], popupElement.prototype, \"model\", void 0);\n__decorate([\n    state()\n], popupElement.prototype, \"_textInput\", void 0);\n__decorate([\n    state()\n], popupElement.prototype, \"_tagSelections\", void 0);\n__decorate([\n    property({ type: String, attribute: 'type' })\n], popupElement.prototype, \"type\", void 0);\n__decorate([\n    property({ type: String, attribute: 'parent-message-id' })\n], popupElement.prototype, \"parentMessageId\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'compact-mode' })\n], popupElement.prototype, \"compactMode\", void 0);\n__decorate([\n    state()\n], popupElement.prototype, \"invalidEntry\", void 0);\n__decorate([\n    property({ type: Object, attribute: 'customLabels' })\n], popupElement.prototype, \"customLabels\", void 0);\n__decorate([\n    property({ type: Boolean, attribute: 'enable-data-collection-check' })\n], popupElement.prototype, \"enableDataCollectionCheck\", void 0);\n__decorate([\n    property({ type: String, attribute: 'data-collection-title' })\n], popupElement.prototype, \"dataCollectionTitle\", void 0);\n__decorate([\n    state()\n], popupElement.prototype, \"collectionAgreement\", void 0);\n"]}