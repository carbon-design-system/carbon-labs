{"version":3,"sources":["components/textElement/src/textElement.template.ts","components/textElement/src/textElement.template.js"],"names":["html","settings","stablePrefix","clabsPrefix","unsafeHTML","ChevronDown16","ChevronUp16","textElementTemplate","customElementClass","_textElements","textElements","alignRight","enableHtmlRendering","enableSummarization","_updateHighlightTarget","updateHighlightTarget","_annotationURLs","annotationURLs","_annotationIndex","annotationIndex","_annotationList","annotationList","_handleAnnotationClick","enableTextHighlighting","selectedAnnotationIndex","disableChevrons","_toggleSummarization","streaming","_showSummarization","showSummarization","map","textPiece","index","type","active","color","content","text","slot","length","JSON","stringify"],"mappings":"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","file":"textElement.template.js","sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html } from 'lit';\nimport { settings } from '@carbon-labs/utilities/es/settings/index.js';\nconst { stablePrefix: clabsPrefix } = settings;\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport ChevronDown16 from '@carbon/web-components/es/icons/chevron--down/16.js';\nimport ChevronUp16 from '@carbon/web-components/es/icons/chevron--up/16.js';\nimport '@carbon/web-components/es/components/tag/index.js';\nimport '../../cardElement/cardElement.js';\nimport '../../carouselElement/carouselElement.js';\n\n/**\n * Lit template for code\n *\n * @param {object} customElementClass Class functionality for the custom element\n * @returns {TemplateResult<1>} Lit html template\n */\nexport function textElementTemplate(customElementClass) {\n  const {\n    _textElements: textElements,\n    alignRight,\n    enableHtmlRendering,\n    enableSummarization,\n    _updateHighlightTarget: updateHighlightTarget,\n    _annotationURLs: annotationURLs,\n    _annotationIndex: annotationIndex,\n    _annotationList: annotationList,\n    _handleAnnotationClick,\n    enableTextHighlighting,\n    selectedAnnotationIndex,\n    disableChevrons,\n    _toggleSummarization,\n    streaming,\n    _showSummarization: showSummarization,\n  } = customElementClass;\n\n  return html`<div\n    class=\"${clabsPrefix}--chat-text\"\n    role=\"textbox\"\n    aria-readonly=\"true\"\n    tabindex=\"0\"\n    aria-label=\"text block\">\n    <div\n      class=\"${clabsPrefix}--chat-text--float-${alignRight ? 'right' : 'left'}\">\n      <div class=\"${clabsPrefix}--chat-text-content\">\n        ${textElements.map(\n          (textPiece, index) =>\n            html` ${textPiece.type === 'annotation' || textPiece.type === 'link'\n              ? html`\n                  <span\n                    class=\"${clabsPrefix}--chat-text-content-${textPiece.type} ${streaming\n                      ? clabsPrefix + '--chat-text-fade-in'\n                      : ''} ${enableTextHighlighting\n                      ? clabsPrefix + '--chat-text-highlighted'\n                      : textPiece.active\n                      ? clabsPrefix + '--chat-text-highlight-active'\n                      : ''} \"\n                    style=\"${textPiece.color\n                      ? 'background-color:' + textPiece.color + ';'\n                      : html``}\"\n                    data-index=\"${index}\"\n                    data-source=\"${textPiece.content}\"\n                    @click=\"${_handleAnnotationClick}\">\n                    ${textPiece.text}\n                  </span>\n                  ${!disableChevrons\n                    ? html`\n                        <span\n                          class=\"${clabsPrefix}--chat-text-content-chevron-container\"\n                          role=\"button\"\n                          aria-label=\"Show link as card below\"\n                          style=\"${textPiece.color\n                            ? 'background-color:' + textPiece.color + ';'\n                            : html``}\">\n                          <span\n                            class=\"${clabsPrefix}--chat-text-content-chevron ${index ===\n                            annotationIndex\n                              ? clabsPrefix +\n                                '--chat-text-content-chevron--focused'\n                              : ''}\"\n                            style=\"${textPiece.color\n                              ? 'background-color:' + textPiece.color + ';'\n                              : html``}\"\n                            data-index=\"${index}\"\n                            data-source=\"${textPiece.content}\"\n                            @click=\"${_handleAnnotationClick}\">\n                            ${!textPiece.active\n                              ? html` ${ChevronDown16({ slot: 'icon' })} `\n                              : html` ${ChevronUp16({ slot: 'icon' })} `}\n                          </span>\n                        </span>\n                      `\n                    : html``}\n                  ${index === annotationIndex && !enableSummarization\n                    ? html`\n                        <slot name=\"custom-highlight-component\">\n                          <div\n                            class=\"${clabsPrefix}--chat-text-content-annotation-element\">\n                            ${annotationURLs.length > 1\n                              ? html`\n                                  <clabs-chat-carousel\n                                    content=${JSON.stringify(annotationURLs)}>\n                                  </clabs-chat-carousel>\n                                `\n                              : html`\n                                  <clabs-chat-card\n                                    type=\"url\"\n                                    content=\"${annotationURLs[0]}\">\n                                  </clabs-chat-card>\n                                `}\n                          </div>\n                        </slot>\n                      `\n                    : html``}\n                `\n              : alignRight\n              ? html` <span\n                  class=\"${streaming\n                    ? clabsPrefix + '--chat-text-fade-in'\n                    : ''}\">\n                  ${textPiece.text}</span\n                >`\n              : enableHtmlRendering || textPiece.type === 'html'\n              ? html` <span\n                  class=\"${clabsPrefix}--chat-text-content-${textPiece.type}\"\n                  >${unsafeHTML(textPiece.text)}</span\n                >`\n              : textPiece.type === 'new-line'\n              ? html`<br />`\n              : textPiece.type === 'code'\n              ? html`\n                  <span\n                    class=\"${clabsPrefix}--chat-text-content-${textPiece.type}\"\n                    >${textPiece.text}</span\n                  >\n                `\n              : textPiece.type === 'default'\n              ? html` <span\n                  class=\"${streaming\n                    ? clabsPrefix + '--chat-text-fade-in'\n                    : ''}\"\n                  >${textPiece.text}</span\n                >`\n              : html`<p class=\"${clabsPrefix}--chat-text-content-paragraph\">\n                  ${textPiece.text}\n                </p>`}`\n        )}\n        ${enableSummarization\n          ? html`\n              <span class=\"${clabsPrefix}--chat-text-content-chevron-container\">\n                <span\n                  class=\"${clabsPrefix}--chat-text-content-chevron ${showSummarization\n                    ? clabsPrefix + '--chat-text-content-chevron--focused'\n                    : ''}\"\n                  @click=\"${_toggleSummarization}\"\n                  role=\"button\"\n                  aria-label=\"show all links as a carousel below\">\n                  ${!showSummarization\n                    ? html` ${ChevronDown16({ slot: 'icon' })} `\n                    : html` ${ChevronUp16({ slot: 'icon' })} `}\n                </span>\n              </span>\n              <div\n                class=\"${clabsPrefix}--chat-text-content-summarization-element\"\n                style=\"${!showSummarization ? 'display:none;' : ''}\">\n                <slot name=\"custom-highlight-component\">\n                  <clabs-chat-carousel\n                    selected-slide=\"${selectedAnnotationIndex}\"\n                    max-slides=\"${1}\"\n                    @on-carousel-index-change=${updateHighlightTarget}\n                    content=${JSON.stringify(annotationList)}>\n                  </clabs-chat-carousel>\n                </slot>\n              </div>\n            `\n          : html``}\n      </div>\n    </div>\n  </div>`;\n}\n","/**\n * @license\n *\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { html } from 'lit';\nimport { settings } from '@carbon-labs/utilities/es/settings/index.js';\nconst { stablePrefix: clabsPrefix } = settings;\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport ChevronDown16 from '@carbon/web-components/es/icons/chevron--down/16.js';\nimport ChevronUp16 from '@carbon/web-components/es/icons/chevron--up/16.js';\nimport '@carbon/web-components/es/components/tag/index.js';\nimport '../../cardElement/cardElement.js';\nimport '../../carouselElement/carouselElement.js';\n/**\n * Lit template for code\n *\n * @param {object} customElementClass Class functionality for the custom element\n * @returns {TemplateResult<1>} Lit html template\n */\nexport function textElementTemplate(customElementClass) {\n    const { _textElements: textElements, alignRight, enableHtmlRendering, enableSummarization, _updateHighlightTarget: updateHighlightTarget, _annotationURLs: annotationURLs, _annotationIndex: annotationIndex, _annotationList: annotationList, _handleAnnotationClick, enableTextHighlighting, selectedAnnotationIndex, disableChevrons, _toggleSummarization, streaming, _showSummarization: showSummarization, } = customElementClass;\n    return html `<div\n    class=\"${clabsPrefix}--chat-text\"\n    role=\"textbox\"\n    aria-readonly=\"true\"\n    tabindex=\"0\"\n    aria-label=\"text block\">\n    <div\n      class=\"${clabsPrefix}--chat-text--float-${alignRight ? 'right' : 'left'}\">\n      <div class=\"${clabsPrefix}--chat-text-content\">\n        ${textElements.map((textPiece, index) => html ` ${textPiece.type === 'annotation' || textPiece.type === 'link'\n        ? html `\n                  <span\n                    class=\"${clabsPrefix}--chat-text-content-${textPiece.type} ${streaming\n            ? clabsPrefix + '--chat-text-fade-in'\n            : ''} ${enableTextHighlighting\n            ? clabsPrefix + '--chat-text-highlighted'\n            : textPiece.active\n                ? clabsPrefix + '--chat-text-highlight-active'\n                : ''} \"\n                    style=\"${textPiece.color\n            ? 'background-color:' + textPiece.color + ';'\n            : html ``}\"\n                    data-index=\"${index}\"\n                    data-source=\"${textPiece.content}\"\n                    @click=\"${_handleAnnotationClick}\">\n                    ${textPiece.text}\n                  </span>\n                  ${!disableChevrons\n            ? html `\n                        <span\n                          class=\"${clabsPrefix}--chat-text-content-chevron-container\"\n                          role=\"button\"\n                          aria-label=\"Show link as card below\"\n                          style=\"${textPiece.color\n                ? 'background-color:' + textPiece.color + ';'\n                : html ``}\">\n                          <span\n                            class=\"${clabsPrefix}--chat-text-content-chevron ${index ===\n                annotationIndex\n                ? clabsPrefix +\n                    '--chat-text-content-chevron--focused'\n                : ''}\"\n                            style=\"${textPiece.color\n                ? 'background-color:' + textPiece.color + ';'\n                : html ``}\"\n                            data-index=\"${index}\"\n                            data-source=\"${textPiece.content}\"\n                            @click=\"${_handleAnnotationClick}\">\n                            ${!textPiece.active\n                ? html ` ${ChevronDown16({ slot: 'icon' })} `\n                : html ` ${ChevronUp16({ slot: 'icon' })} `}\n                          </span>\n                        </span>\n                      `\n            : html ``}\n                  ${index === annotationIndex && !enableSummarization\n            ? html `\n                        <slot name=\"custom-highlight-component\">\n                          <div\n                            class=\"${clabsPrefix}--chat-text-content-annotation-element\">\n                            ${annotationURLs.length > 1\n                ? html `\n                                  <clabs-chat-carousel\n                                    content=${JSON.stringify(annotationURLs)}>\n                                  </clabs-chat-carousel>\n                                `\n                : html `\n                                  <clabs-chat-card\n                                    type=\"url\"\n                                    content=\"${annotationURLs[0]}\">\n                                  </clabs-chat-card>\n                                `}\n                          </div>\n                        </slot>\n                      `\n            : html ``}\n                `\n        : alignRight\n            ? html ` <span\n                  class=\"${streaming\n                ? clabsPrefix + '--chat-text-fade-in'\n                : ''}\">\n                  ${textPiece.text}</span\n                >`\n            : enableHtmlRendering || textPiece.type === 'html'\n                ? html ` <span\n                  class=\"${clabsPrefix}--chat-text-content-${textPiece.type}\"\n                  >${unsafeHTML(textPiece.text)}</span\n                >`\n                : textPiece.type === 'new-line'\n                    ? html `<br />`\n                    : textPiece.type === 'code'\n                        ? html `\n                  <span\n                    class=\"${clabsPrefix}--chat-text-content-${textPiece.type}\"\n                    >${textPiece.text}</span\n                  >\n                `\n                        : textPiece.type === 'default'\n                            ? html ` <span\n                  class=\"${streaming\n                                ? clabsPrefix + '--chat-text-fade-in'\n                                : ''}\"\n                  >${textPiece.text}</span\n                >`\n                            : html `<p class=\"${clabsPrefix}--chat-text-content-paragraph\">\n                  ${textPiece.text}\n                </p>`}`)}\n        ${enableSummarization\n        ? html `\n              <span class=\"${clabsPrefix}--chat-text-content-chevron-container\">\n                <span\n                  class=\"${clabsPrefix}--chat-text-content-chevron ${showSummarization\n            ? clabsPrefix + '--chat-text-content-chevron--focused'\n            : ''}\"\n                  @click=\"${_toggleSummarization}\"\n                  role=\"button\"\n                  aria-label=\"show all links as a carousel below\">\n                  ${!showSummarization\n            ? html ` ${ChevronDown16({ slot: 'icon' })} `\n            : html ` ${ChevronUp16({ slot: 'icon' })} `}\n                </span>\n              </span>\n              <div\n                class=\"${clabsPrefix}--chat-text-content-summarization-element\"\n                style=\"${!showSummarization ? 'display:none;' : ''}\">\n                <slot name=\"custom-highlight-component\">\n                  <clabs-chat-carousel\n                    selected-slide=\"${selectedAnnotationIndex}\"\n                    max-slides=\"${1}\"\n                    @on-carousel-index-change=${updateHighlightTarget}\n                    content=${JSON.stringify(annotationList)}>\n                  </clabs-chat-carousel>\n                </slot>\n              </div>\n            `\n        : html ``}\n      </div>\n    </div>\n  </div>`;\n}\n"]}