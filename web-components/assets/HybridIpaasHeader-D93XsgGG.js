import{i as b,x as m}from"./iframe-Bec0q31n.js";import{n as o,t as g}from"./property-BfUjd6qz.js";import{r as C}from"./state-C_H-2XIP.js";import{s as k}from"./settings-BQP9c3yA.js";import{I as N}from"./constant-NpqH8VlU.js";import"./CommonHeader-DjhOUk7Z.js";var v=Object.defineProperty,L=Object.getOwnPropertyDescriptor,e=(t,n,r,l)=>{for(var a=l>1?void 0:l?L(n,r):n,s=t.length-1,p;s>=0;s--)(p=t[s])&&(a=(l?p(n,r,a):p(a))||a);return l&&a&&v(n,r,a),a};const{stablePrefix:P}=k;let i=class extends b{constructor(){super(...arguments),this.productName=null,this.productKey="",this.fetchHeaders={},this.basePath="",this.displayName="",this.userEmail="",this.productVersion=null,this.assistMeKey="",this.aiCallbackEvent="",this.hasNewNotifications=!1,this.searchConfigs=null,this.capabilityProfileFooterLinks=[],this.capabilityGlobalActions=[],this.headerOptions={...N}}firstUpdated(){this.productKey||console.error("A product key is required for the environment switcher to function."),this.initializeHeaderOptions()}async initializeHeaderOptions(){try{const t=await this.loadIpaasHeaderOptionsFromServer(this.fetchHeaders,this.basePath,this.productKey);this.headerOptions=this.buildHeaderOptions(t)}catch(t){console.error("Failed to load header options:",t)}}async loadIpaasHeaderOptionsFromServer(t,n,r){t=t||{},t["x-hybrid-ipaas-product-key"]=r;const l=n?n+"/hybrid-ipaas/v1/header/options":"/hybrid-ipaas/v1/header/options",a=await fetch(l,{credentials:"same-origin",headers:t});if(!a.ok)throw new Error(`Failed to fetch header options: ${a.statusText}`);return a.json()}initLogoutLink(){const t={text:"Logout",carbonIcon:"Logout",arialLabel:"Logout"};return this.logoutCallback?t.onClickHandler=this.logoutCallback:t.href=`${this.basePath}/logout`,t}buildHeaderOptions(t){var p,h,d,f,y,u;const n={email:this.userEmail,displayName:this.displayName},r=[];this.productName&&r.push({label:"Product",text:this.productName}),this.productVersion&&r.push({label:"Version",text:this.productVersion}),t.mainSectionItems&&t.mainSectionItems.length>0&&t.mainSectionItems.forEach(c=>{r.push(c)});const l={label:this.productName?this.productName:""},a=(p=t.profileFooterLinks)==null?void 0:p.findIndex(c=>c.text.toLowerCase()==="logout");a!==void 0&&a>-1?(h=t.profileFooterLinks)==null||h.splice(a,1,this.initLogoutLink()):(d=t.profileFooterLinks)==null||d.push(this.initLogoutLink());const s={...t,capabilityName:this.productName===null?t.capabilityName:l,profile:this.userEmail===""||this.displayName===""?t.profile:n,mainSectionItems:r};return this.assistMeKey&&(s.assistMeConfigs={productId:this.assistMeKey}),this.notificationOpenCallback&&(s.notificationConfigs={onClick:this.notificationOpenCallback}),this.searchConfigs&&(s.searchConfigs={placeholder:((f=this.searchConfigs)==null?void 0:f.placeholder)??"Search",callback:(y=this.searchConfigs)==null?void 0:y.callback,submitCallback:(u=this.searchConfigs)==null?void 0:u.submitCallback}),this.aiCallback&&(s.chatBotConfigs={onClick:this.aiCallback}),this.aiCallbackEvent&&(s.chatBotConfigs={onClick:()=>{const c=new CustomEvent(this.aiCallbackEvent,{bubbles:!0,cancelable:!0});this.dispatchEvent(c)}}),this.capabilityProfileFooterLinks&&this.capabilityProfileFooterLinks.length>0&&(s.profileFooterLinks=[...this.capabilityProfileFooterLinks,...s.profileFooterLinks??[]]),this.capabilityGlobalActions&&this.capabilityGlobalActions.length>0&&(s.globalActionConfigs=[...this.capabilityGlobalActions]),s}render(){return m`<div id="ipaas-header-container">
      <clabs-global-header-apaas
        ?hasNewNotifications="${this.hasNewNotifications}"
        .headerProps="${this.headerOptions}"></clabs-global-header-apaas>
    </div>`}};e([o({type:String})],i.prototype,"productName",2);e([o({type:String})],i.prototype,"productKey",2);e([o({type:Object})],i.prototype,"fetchHeaders",2);e([o({type:String})],i.prototype,"basePath",2);e([o({type:String})],i.prototype,"displayName",2);e([o({type:String})],i.prototype,"userEmail",2);e([o({type:String})],i.prototype,"productVersion",2);e([o({type:String})],i.prototype,"assistMeKey",2);e([o({type:Function})],i.prototype,"aiCallback",2);e([o({type:String})],i.prototype,"aiCallbackEvent",2);e([o({type:Function})],i.prototype,"logoutCallback",2);e([o({type:Function})],i.prototype,"notificationOpenCallback",2);e([o({type:Boolean})],i.prototype,"hasNewNotifications",2);e([o({type:Object})],i.prototype,"searchConfigs",2);e([o({type:Array})],i.prototype,"capabilityProfileFooterLinks",2);e([o({type:Array})],i.prototype,"capabilityGlobalActions",2);e([C()],i.prototype,"headerOptions",2);i=e([g(`${P}-global-header-hybrid-ipaas`)],i);export{i as H};
