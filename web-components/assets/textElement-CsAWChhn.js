import{n as d,t as M}from"./property-CzrLTE60.js";import{i as V,c as A,x as s}from"./iframe-ClXo_xvh.js";import{r as x}from"./state-D55fdd7s.js";import{o as tt}from"./unsafe-html-D4N6Jav0.js";import{_ as U}from"./16-D0aIqdwb.js";import"./operational-tag-3IZTjQ-t.js";import{_ as et}from"./16-BpKA4nzT.js";import"./button-Qyo9VEvT.js";import"./button-skeleton-MbP-tyaq.js";import{i as l}from"./icon-loader-DIbQOFkY.js";import{s as S}from"./settings-BQP9c3yA.js";import{_ as at}from"./search-Dtq-mbVn.js";import{_ as it}from"./16-CQhU3uUy.js";import"./tableElement-CKMQYmgv.js";const st=V`@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-card) .clabs--chat-card-container{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:0;border:1px solid var(--cds-border-subtle-00, #e0e0e0);border-radius:8px;animation:fade-in .6s forwards;background:var(--cds-background, #ffffff);inline-size:248px;opacity:0;transition:border-color .15s linear}:host(clabs-chat-card) .clabs--chat-card-container:hover{border:1px solid var(--cds-focus, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-side-icon{display:flex;box-sizing:border-box;justify-content:center;padding-inline-end:8px}:host(clabs-chat-card) .clabs--chat-card-main-content{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;flex-grow:1}:host(clabs-chat-card) .clabs--chat-card-image-container{overflow:hidden;background:var(--cds-background, #ffffff);block-size:124px;inline-size:248px}:host(clabs-chat-card) .clabs--chat-card-image-container img{overflow:hidden;background:#d0e2ff;block-size:auto;inline-size:100%;min-block-size:124px}:host(clabs-chat-card) .clabs--chat-card-detail-container{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:16px;block-size:124px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-container-video{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:16px;block-size:86px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-side-content{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;block-size:92px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-side-content-video{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;block-size:54px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-video-container{display:flex;overflow:hidden;align-items:center;justify-content:center;background:#000;block-size:164px;inline-size:248px}:host(clabs-chat-card) .clabs--chat-card-video-container video{overflow:hidden;block-size:auto;inline-size:100%;max-block-size:164px}:host(clabs-chat-card) .clabs--chat-card-detail-title{position:relative;overflow:hidden;block-size:22px;color:var(--cds-text-primary, #161616);font-family:IBM Plex Sans,sans-serif;font-size:16px;font-style:normal;font-weight:500;line-height:22px;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-title:after{position:absolute;z-index:99;background:linear-gradient(to right,var(--chat-card-theme-bottom, "rgba(0,0,0,0)"),var(--chat-card-theme-top, "rgba(0,0,0,0)"));block-size:100%;content:"";inline-size:30px;inset-block-start:0;inset-inline-end:0;pointer-events:none}:host(clabs-chat-card) .clabs--chat-card-detail-description{position:relative;overflow:hidden;box-sizing:border-box;flex-grow:1;color:var(--cds-text-secondary, #525252);font-size:12px;line-height:16px;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-description:after{position:absolute;z-index:99;background:linear-gradient(to right,var(--chat-card-theme-bottom, "rgba(0,0,0,0)"),var(--chat-card-theme-top, "rgba(0,0,0,0)"));block-size:100%;content:"";inline-size:30px;inset-block-start:0;inset-inline-end:0;pointer-events:none}:host(clabs-chat-card) .clabs--chat-card-loader{flex-grow:2;background-color:#d0e2ff;block-size:248px}:host(clabs-chat-card) .clabs--chat-card-loader-file{flex-grow:2;background-color:#d0e2ff;block-size:124px}:host(clabs-chat-card) .clabs--chat-card-detail-link-container{display:flex;align-items:center;justify-content:space-between;block-size:16px;font-size:12px}:host(clabs-chat-card) .clabs--chat-card-detail-link{color:var(--cds-link-primary, #0f62fe);text-decoration:none;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-link a{color:var(--cds-link-primary, #0f62fe);text-decoration:none}:host(clabs-chat-card) .clabs--chat-card-detail-link-icon{color:var(--cds-link-primary, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-link-icon svg{fill:var(--cds-link-primary, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-audio-container{display:flex;box-sizing:border-box;flex-grow:1;align-items:center}:host(clabs-chat-card) .clabs--chat-card-detail-audio-item{color:var(--cds-text-secondary, #525252);font-size:10px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-timer{color:var(--cds-text-secondary, #525252);font-size:10px;padding-inline:8px 9px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-progress-bar{position:relative;box-sizing:border-box;flex-grow:1;border-radius:2px;background:var(--cds-border-subtle-01, #c6c6c6);block-size:4px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-progress{background:var(--cds-link-primary, #0f62fe);block-size:4px;inline-size:var("--chat-card-audio-progress-bar-width", "0%")}`;var nt=Object.defineProperty,w=(c,t,e,i)=>{for(var a=void 0,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(t,e,a)||a);return a&&nt(t,e,a),a};const E=class E extends A{constructor(){super(...arguments),this.fileTypes=["csv","mp3","mp4","png","pdf","ppt","svg","xls","zip","wmv","txt","tsv","mov","jpg","gif"],this._cardData=null,this._isAudioPlaying=!1}firstUpdated(){this._getTheme(),this._buildCard()}updated(t){t.has("content")&&this._buildCard(),(t.has("_audioProgress")||t.has("_audioDuration"))&&this.style.setProperty("--chat-card-audio-progress-bar-width",this._audioProgress/this._audioDuration*100+"%")}_translateHexToRGB(t){const e=t.replace(/^#/,""),i=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return[i,a,n].join(",")}_getTheme(){if(this.parentElement instanceof HTMLElement){const e=getComputedStyle(this.parentElement).getPropertyValue("--cds-background"),i=this._translateHexToRGB(e);this.style.setProperty("--chat-card-theme-bottom"," rgba("+i+", 0)"),this.style.setProperty("--chat-card-theme-top"," rgba("+i+", 1)")}}_buildCard(){this.cardElements==null?this.type==="file"?this._getFileData(this.content):this.type==="audio"?this._getAudioData(this.content):this.loading||this._getSitePreviewData(this.content):(this._cardData=this.cardElements,this.fileType==null&&this.type!=="url"&&(this.fileType=this._getFileType(this.cardElements.link)),this.requestUpdate())}_getShortenedURL(t){try{return new URL(t).host}catch{return""}}_getSiteName(t){try{const e=new URL(t),i=e.hostname.replace(/^www\./,"").split(".").slice(-2,-1)[0],a=i.charAt(0).toUpperCase()+i.slice(1),p=e.pathname.split("/").sort((f,b)=>b.length-f.length).pop(),u=p?p.replace(new RegExp("[-_]+","g")," "):"";return u!==""?a+": "+u.charAt(0).toUpperCase()+u.slice(1):a}catch{return""}}_getVideoFileName(t){try{return t.split("/").slice(-1)[0]}catch{return""}}_getVideoTitle(t){try{return t.split("/").slice(-1)[0].split(".")[0].replace(/_/g," ")}catch{return""}}_getFileType(t){const e=t.split(".");let i=e[e.length-1];return this.fileTypes.indexOf(i)<0&&(i="unknown"),i}_getFileData(t){const e={};e.title=t.split("/").slice(-1),e.shortenedUrl=this._getShortenedURL(t),e.link=t,this.fileType=this._getFileType(t),e.description=this.fileType+" file from: "+t,this._cardData=e,this.requestUpdate()}_getAudioData(t){const e={};e.title=this._getVideoTitle(t),e.shortenedUrl=this._getShortenedURL(t),e.link=t,this.fileType=this._getFileType(t),e.description=this.fileType!=="unknown"?this.fileType.toUpperCase():" file from: "+t,this._cardData=e,this._updateAudioDuration(),this._updateAudioProgress(),this.requestUpdate()}_toggleAudio(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(t.paused?(t.play(),this._isAudioPlaying=!0):(t.pause(),this._isAudioPlaying=!1))}_updateAudioDuration(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(this._audioDuration=t.duration),this._updateAudioProgress()}_updateAudioProgress(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(this._audioProgress=t.currentTime)}_formatAudioTime(t){if(!t)return"00:00";const e=Math.floor(t/60);let i=e.toString();e<10&&(i="0"+i);const a=Math.floor(t%60);let n=a.toString();return a<10&&(n="0"+n),i+":"+n}async _getSitePreviewData(t){try{let e={};this.apiUrl&&(e=await this._previewData(t)),(!e||!e.title&&!e.imageUrl&&!e.description)&&(this.type==="video"?e.title=this._getVideoTitle(t):(e.title=this._getSiteName(t),e.description=t)),e.title||(e.title=this._getSiteName(t)),e.link||(e.link=t),e.shortenedUrl=this._getShortenedURL(t),this._cardData=e,this.requestUpdate()}catch{const i=this._getSiteName(t);this._cardData={title:i,imageUrl:null,description:t,link:t},this.requestUpdate()}}async _previewData(t){const e=this.apiUrl,i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};try{return await fetch(e,i).then(a=>a.json()).then(a=>a)}catch(a){return{reply:"Error reaching: "+e+" Details: "+a.message,failed:!0}}}};E.styles=st;let _=E;w([d({type:Object,attribute:"card-elements",reflect:!0})],_.prototype,"cardElements");w([x()],_.prototype,"fileTypes");w([d({type:String,attribute:"content",reflect:!0})],_.prototype,"content");w([d({type:String,attribute:"api-url",reflect:!0})],_.prototype,"apiUrl");w([d({type:String,attribute:"type",reflect:!0})],_.prototype,"type");w([d({type:String,attribute:"file-type",reflect:!0})],_.prototype,"fileType");w([d({type:Boolean,attribute:"loading",reflect:!0})],_.prototype,"loading");w([x()],_.prototype,"_cardData");w([x()],_.prototype,"_isAudioPlaying");w([x()],_.prototype,"_audioProgress");w([x()],_.prototype,"_audioDuration");w([x()],_.prototype,"_audioRatio");var Z={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M11.7,8.4l-5.5,3c-0.2,0.1-0.3,0.1-0.5,0c-0.2-0.1-0.2-0.3-0.2-0.4V5	c0-0.2,0.1-0.3,0.2-0.4c0.2-0.1,0.3-0.1,0.5,0l5.5,3C12,7.7,12.1,8,11.9,8.2C11.9,8.3,11.8,8.4,11.7,8.4L11.7,8.4z"}}],name:"play--filled",size:16},B={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M12,6H10A2,2,0,0,0,8,8V24a2,2,0,0,0,2,2h2a2,2,0,0,0,2-2V8a2,2,0,0,0-2-2Z"}},{elem:"path",attrs:{d:"M22,6H20a2,2,0,0,0-2,2V24a2,2,0,0,0,2,2h2a2,2,0,0,0,2-2V8a2,2,0,0,0-2-2Z"}}],name:"pause--filled",size:16},ot={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M31 12.41 29.59 11 26 14.59 22.41 11 21 12.41 24.59 16 21 19.59 22.41 21 26 17.41 29.59 21 31 19.59 27.41 16 31 12.41z"}},{elem:"path",attrs:{d:"M18,30a1,1,0,0,1-.71-.3L9.67,22H3a1,1,0,0,1-1-1H2V11a1,1,0,0,1,1-1H9.67l7.62-7.7a1,1,0,0,1,1.41,0A1,1,0,0,1,19,3V29A1,1,0,0,1,18,30ZM4,20h6a1.17,1.17,0,0,1,.79.3L17,26.57V5.43L10.79,11.7A1.17,1.17,0,0,1,10,12H4Z"}}],name:"volume--mute",size:16},D={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28,9H22v2h6v4H24v2h4v4H22v2h6a2,2,0,0,0,2-2V11A2,2,0,0,0,28,9Z"}},{elem:"path",attrs:{d:"M14,23H12V9h6a2,2,0,0,1,2,2v5a2,2,0,0,1-2,2H14Zm0-7h4V11H14Z"}},{elem:"path",attrs:{d:"M8 9 6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"}}],name:"MP3",size:24},rt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28,10v8h0V10m1-1H27v8H24V9H22V19h5v4h2V19h1V17H29V9Z"}},{elem:"path",attrs:{d:"M14,23H12V9h6a2,2,0,0,1,2,2v5a2,2,0,0,1-2,2H14Zm0-7h4V11H14Z"}},{elem:"path",attrs:{d:"M8 9 6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"}}],name:"MP4",size:24},lt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M30,23H24a2,2,0,0,1-2-2V11a2,2,0,0,1,2-2h6v2H24V21h4V17H26V15h4Z"}},{elem:"path",attrs:{d:"M18 19 14.32 9 12 9 12 23 14 23 14 13 17.68 23 20 23 20 9 18 9 18 19z"}},{elem:"path",attrs:{d:"M4,23H2V9H8a2,2,0,0,1,2,2v5a2,2,0,0,1-2,2H4Zm0-7H8V11H4Z"}}],name:"PNG",size:24},ct={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M30 11 30 9 22 9 22 23 24 23 24 17 29 17 29 15 24 15 24 11 30 11z"}},{elem:"path",attrs:{d:"M8,9H2V23H4V18H8a2,2,0,0,0,2-2V11A2,2,0,0,0,8,9Zm0,7H4V11H8Z"}},{elem:"path",attrs:{d:"M16,23H12V9h4a4,4,0,0,1,4,4v6A4,4,0,0,1,16,23Zm-2-2h2a2,2,0,0,0,2-2V13a2,2,0,0,0-2-2H14Z"}}],name:"PDF",size:24},dt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M22 11 25 11 25 23 27 23 27 11 30 11 30 9 22 9 22 11z"}},{elem:"path",attrs:{d:"M14,23H12V9h6a2.002,2.002,0,0,1,2,2v5a2.002,2.002,0,0,1-2,2H14Zm0-7h4V10.9985H14Z"}},{elem:"path",attrs:{d:"M4,23H2V9H8a2.002,2.002,0,0,1,2,2v5a2.002,2.002,0,0,1-2,2H4Zm0-7H8V10.9985H4Z"}}],name:"PPT",size:24},ht={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M30,23H24a2,2,0,0,1-2-2V11a2,2,0,0,1,2-2h6v2H24V21h4V17H26V15h4Z"}},{elem:"path",attrs:{d:"M18 9 16 22 14 9 12 9 14.52 23 17.48 23 20 9 18 9z"}},{elem:"path",attrs:{d:"M8,23H2V21H8V17H4a2,2,0,0,1-2-2V11A2,2,0,0,1,4,9h6v2H4v4H8a2,2,0,0,1,2,2v4A2,2,0,0,1,8,23Z"}}],name:"SVG",size:24},pt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28,23H22V21h6V17H24a2.002,2.002,0,0,1-2-2V11a2.002,2.002,0,0,1,2-2h6v2H24v4h4a2.002,2.002,0,0,1,2,2v4A2.0023,2.0023,0,0,1,28,23Z"}},{elem:"path",attrs:{d:"M14 21 14 9 12 9 12 23 20 23 20 21 14 21z"}},{elem:"path",attrs:{d:"M10 9 8 9 6 15 4 9 2 9 4.752 16 2 23 4 23 6 17 8 23 10 23 7.245 16 10 9z"}}],name:"XLS",size:24},ut={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28,9H22V23h2V18h4a2,2,0,0,0,2-2V11A2,2,0,0,0,28,9Zm0,7H24V11h4Z"}},{elem:"path",attrs:{d:"M12 9 12 11 15 11 15 21 12 21 12 23 20 23 20 21 17 21 17 11 20 11 20 9 12 9z"}},{elem:"path",attrs:{d:"M10 9 2 9 2 11 8 11 2 21 2 23 10 23 10 21 4 21 10 11 10 9z"}}],name:"ZIP",size:24},O={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M29 9 27 22 25 9 23 9 25.52 23 28.48 23 31 9 29 9z"}},{elem:"path",attrs:{d:"M19 9 17.48 14 17 15.98 16.54 14 15 9 13 9 13 23 15 23 15 15 14.84 13 15.42 15 17 19.63 18.58 15 19.16 13 19 15 19 23 21 23 21 9 19 9z"}},{elem:"path",attrs:{d:"M9.2 9 8.86 17 8.6 21.54 8.19 18 7.51 12.54 5.49 12.54 4.81 18 4.4 21.54 4.14 17 3.8 9 2 9 3 23 5.27 23 6.03 18.07 6.49 14 6.5 13.97 6.51 14 6.97 18.07 7.73 23 10 23 11 9 9.2 9z"}}],name:"WMV",size:24},mt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M21 11 24 11 24 23 26 23 26 11 29 11 29 9 21 9 21 11z"}},{elem:"path",attrs:{d:"M20 9 18 9 16 15 14 9 12 9 14.75 16 12 23 14 23 16 17 18 23 20 23 17.25 16 20 9z"}},{elem:"path",attrs:{d:"M3 11 6 11 6 23 8 23 8 11 11 11 11 9 3 9 3 11z"}}],name:"TXT",size:24},gt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28 9 26 22 24 9 22 9 24.516 23 27.484 23 30 9 28 9z"}},{elem:"path",attrs:{d:"M18,23H12V21h6V17H14a2.002,2.002,0,0,1-2-2V11a2.002,2.002,0,0,1,2-2h6v2H14v4h4a2.002,2.002,0,0,1,2,2v4A2.002,2.002,0,0,1,18,23Z"}},{elem:"path",attrs:{d:"M2 11 5 11 5 23 7 23 7 11 10 11 10 9 2 9 2 11z"}}],name:"TSV",size:24},xt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28 9 26 22 24 9 22 9 24.52 23 27.48 23 30 9 28 9z"}},{elem:"path",attrs:{d:"M18,23H14a2,2,0,0,1-2-2V11a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V21A2,2,0,0,1,18,23ZM14,11V21h4V11Z"}},{elem:"path",attrs:{d:"M8 9 6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"}}],name:"MOV",size:24},ft={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M30,23H24a2,2,0,0,1-2-2V11a2,2,0,0,1,2-2h6v2H24V21h4V17H26V15h4Z"}},{elem:"path",attrs:{d:"M14,23H12V9h6a2,2,0,0,1,2,2v5a2,2,0,0,1-2,2H14Zm0-7h4V11H14Z"}},{elem:"path",attrs:{d:"M8,23H4a2,2,0,0,1-2-2V19H4v2H8V9h2V21A2,2,0,0,1,8,23Z"}}],name:"JPG",size:24},vt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M2,12v8a3,3,0,0,0,3,3h5V15H6v2H8v4H5a1,1,0,0,1-1-1V12a1,1,0,0,1,1-1h5V9H5A3,3,0,0,0,2,12Z"}},{elem:"path",attrs:{d:"M30 11 30 9 22 9 22 23 24 23 24 17 29 17 29 15 24 15 24 11 30 11z"}},{elem:"path",attrs:{d:"M12 9 12 11 15 11 15 21 12 21 12 23 20 23 20 21 17 21 17 11 20 11 20 9 12 9z"}}],name:"GIF",size:24},bt={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M28 9 26 22 24 9 22 9 24.516 23 27.484 23 30 9 28 9z"}},{elem:"path",attrs:{d:"M18,23H12V21h6V17H14a2.002,2.002,0,0,1-2-2V11a2.002,2.002,0,0,1,2-2h6v2H14v4h4a2.002,2.002,0,0,1,2,2v4A2.002,2.002,0,0,1,18,23Z"}},{elem:"path",attrs:{d:"M10,23H4a2.0023,2.0023,0,0,1-2-2V11A2.002,2.002,0,0,1,4,9h6v2H4V21h6Z"}}],name:"CSV",size:24},N={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M13 11 13 21 21 16 13 11z"}},{elem:"path",attrs:{d:"m28,6H4c-1.103,0-2,.8975-2,2v16c0,1.1025.897,2,2,2h24c1.103,0,2-.8975,2-2V8c0-1.1025-.897-2-2-2Zm0,18H4V8h24v16Z"}}],name:"video-player",size:24},j={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M25.7,9.3l-7-7A.9078.9078,0,0,0,18,2H8A2.0059,2.0059,0,0,0,6,4V28a2.0059,2.0059,0,0,0,2,2H24a2.0059,2.0059,0,0,0,2-2V10A.9078.9078,0,0,0,25.7,9.3ZM18,4.4,23.6,10H18ZM24,28H8V4h8v6a2.0059,2.0059,0,0,0,2,2h6Z"}}],name:"document--blank",size:24},F={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M25,4H10A2.002,2.002,0,0,0,8,6V20.5563A3.9551,3.9551,0,0,0,6,20a4,4,0,1,0,4,4V12H25v8.5562A3.9545,3.9545,0,0,0,23,20a4,4,0,1,0,4,4V6A2.0023,2.0023,0,0,0,25,4ZM6,26a2,2,0,1,1,2-2A2.0023,2.0023,0,0,1,6,26Zm17,0a2,2,0,1,1,2-2A2.0027,2.0027,0,0,1,23,26ZM10,6H25v4H10Z"}}],name:"music",size:24};/**
 * @license
 *
 * Copyright IBM Corp. 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:r}=S;function _t(c){const{_cardData:t,type:e,content:i,fileType:a,_toggleAudio:n,_isAudioPlaying:o,_audioProgress:p,_audioDuration:u,_updateAudioDuration:f,_updateAudioProgress:b,_formatAudioTime:C}=c;return s`<div class="${r}--chat-card-container">
    <div class="${r}--chat-card-main-content">
      ${t?s` ${t.imageUrl&&e==="url"?s` <div class="${r}--chat-card-image-container">
                  <img
                    class="${r}--chat-card-image"
                    src="${t.imageUrl}" />
                </div>`:e==="video"?s` <div class="${r}--chat-card-video-container">
                  <video controls>
                    <source src="${i}" type="video/webm" />
                  </video>
                </div>`:s``}

            <div
              class="${r}--chat-card-detail-container${e==="video"?"-video":""}">
              ${a&&e==="file"?s` <div class="${r}--chat-card-detail-side-icon">
                    ${a==="mp3"?s`${l(D())}`:a==="mp4"?s`${l(rt())}`:a==="png"?s`${l(lt())}`:a==="pdf"?s`${l(ct())}`:a==="ppt"?s`${l(dt())}`:a==="svg"?s`${l(ht())}`:a==="xls"?s`${l(pt())}`:a==="zip"?s`${l(ut())}`:a==="wmv"?s`${l(O())}`:a==="txt"?s`${l(mt())}`:a==="tsv"?s`${l(gt())}`:a==="mov"?s`${l(xt())}`:a==="jpg"?s`${l(ft())}`:a==="gif"?s`${l(vt())}`:a==="csv"?s`${l(bt())}`:s`${l(j())}`}
                  </div>`:s``}
              ${e==="video"?s` <div class="${r}--chat-card-detail-side-icon">
                    ${l(N())}
                  </div>`:s``}
              ${a&&e==="audio"?s`
                    ${a!=="unknown"?s` <div
                          class="${r}--chat-card-detail-side-icon">
                          ${a==="mp3"?s`${l(D())}`:a==="wmv"?s`${l(O())}`:s`${l(F())}`}
                        </div>`:s``}
                  `:s``}

              <div
                class="${r}--chat-card-detail-side-content${e==="video"?"-video":""}">
                <div class="${r}--chat-card-detail-title">
                  ${t.title}
                </div>

                <div class="${r}--chat-card-detail-description">
                  ${t.description?t.description:""}
                </div>
                ${e!=="audio"?s`
                      <div
                        class="${r}--chat-card-detail-link-container">
                        <a
                          class="${r}--chat-card-detail-link"
                          href="${t.link}"
                          target="_blank"
                          >${t.shortenedUrl}</a
                        >

                        <div class="${r}--chat-card-detail-link-icon">
                          <a href="${t.link}" target="_blank">
                            ${l(et())}
                          </a>
                        </div>
                      </div>
                    `:s`
                      <div
                        class="${r}--chat-card-detail-audio-container">
                        <div
                          class="${r}--chat-card-detail-audio-item">
                          ${o?s` <cds-button
                                aria-label="Pause Audio File"
                                role="button"
                                kind="ghost"
                                size="sm"
                                @click="${n}">
                                ${l(B,{slot:"icon"})}
                              </cds-button>`:s` <cds-button
                                kind="ghost"
                                aria-label="Play Audio File"
                                role="button"
                                size="sm"
                                @click="${n}">
                                ${l(Z,{slot:"icon"})}
                              </cds-button>`}
                        </div>
                        <!-- <div class="${r}--chat-card-detail-audio-item">
                <cds-button aria-label="Mute Audio" role="button" kind="ghost" size="sm" disabled>
                  ${l(ot,{slot:"icon"})}
                </cds-button>
                </div>-->
                        <div
                          class="${r}--chat-card-detail-audio-progress-bar">
                          <div
                            class="${r}--chat-card-detail-audio-progress">
                            &nbsp;
                          </div>
                        </div>
                        <div
                          class="${r}--chat-card-detail-audio-timer">
                          ${C(p)}/${C(u)}
                        </div>
                      </div>
                      <audio
                        id="audio"
                        src="${t.link}"
                        @timeupdate="${b}"
                        @loadedmetadata="${f}"></audio>
                    `}
              </div>
            </div>`:s`${e==="url"?s` <div
                  class="${r}--chat-card-image-container"></div>`:e==="video"?s` <div
                  class="${r}--chat-card-video-container"></div>`:s``}

            <div
              class="${r}--chat-card-detail-container${e==="video"?"-video":""}">
              ${e==="file"?s` <div class="${r}--chat-card-detail-side-icon">
                    ${l(j())}
                  </div>`:s``}
              ${e==="video"?s` <div class="${r}--chat-card-detail-side-icon">
                    ${l(N())}
                  </div>`:s``}
              ${e==="audio"?s` <div class="${r}--chat-card-detail-side-icon">
                    ${l(F())}
                  </div>`:s``}

              <div
                class="${r}--chat-card-detail-side-content${e==="video"?"-video":""}">
                <div class="${r}--chat-card-detail-title">&nbsp;</div>

                <div class="${r}--chat-card-detail-description">
                  &nbsp;
                </div>
                ${e!=="audio"?s`
                      <div
                        class="${r}--chat-card-detail-link-container">
                        <div
                          class="${r}--chat-card-detail-link-icon"></div>
                      </div>
                    `:s`
                      <div
                        class="${r}--chat-card-detail-audio-container">
                        <div
                          class="${r}--chat-card-detail-audio-item">
                          ${o?s` <cds-button
                                aria-label="Pause Audio"
                                role="button"
                                kind="ghost"
                                disabled
                                size="sm">
                                ${l(B,{slot:"icon"})}
                              </cds-button>`:s` <cds-button
                                aria-label="Start Audio"
                                role="button"
                                kind="ghost"
                                disabled
                                size="sm">
                                ${l(Z,{slot:"icon"})}
                              </cds-button>`}
                        </div>
                        <div
                          class="${r}--chat-card-detail-audio-progress-bar">
                          <div
                            class="${r}--chat-card-detail-audio-progress">
                            &nbsp;
                          </div>
                        </div>
                        <div
                          class="${r}--chat-card-detail-audio-timer">
                          00:00/00:00
                        </div>
                      </div>
                    `}
              </div>
            </div>`}
    </div>
  </div>`}var yt=Object.getOwnPropertyDescriptor,wt=(c,t,e,i)=>{for(var a=i>1?void 0:i?yt(t,e):t,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(a)||a);return a};const{stablePrefix:$t}=S;let q=class extends _{render(){return _t(this)}};q=wt([M(`${$t}-chat-card`)],q);const zt=V`:host(clabs-chat-text){overflow:hidden;font-family:IBM Plex Sans,sans-serif;font-size:14px;font-style:normal;font-weight:400;letter-spacing:.16px;line-height:20px;word-break:break-word}:host(clabs-chat-text) .clabs--chat-text--float-right{display:flex;justify-content:flex-end}:host(clabs-chat-text) .clabs--chat-text-content{flex-grow:1;max-inline-size:100%}:host(clabs-chat-text) .clabs--chat-text-content-chevron-container{display:inline-block}:host(clabs-chat-text) .clabs--chat-text-content-paragraph{margin:0}:host(clabs-chat-text) .clabs--chat-text-content-chevron{display:inline-block;box-sizing:border-box;padding:0;border:1px solid var(--cds-border-subtle-01, #c6c6c6);border-radius:8px;margin:0;background:var(--cds-layer-accent-01, #e0e0e0);block-size:16px;cursor:pointer;inline-size:18px;margin-inline:1px;transition:border-color .15s linear;vertical-align:middle}@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-text) .clabs--chat-text-fade-in{animation:fade-in .6s forwards;opacity:0}:host(clabs-chat-text) .clabs--chat-text-content-chevron:hover{border:1px solid var(--cds-focus, #0f62fe);cursor:pointer}:host(clabs-chat-text) .clabs--chat-text-content-chevron--focused{border:1px solid var(--cds-focus, #0f62fe)}:host(clabs-chat-text) .clabs--chat-text-content-chevron svg{fill:var(--cds-text-secondary, #525252);pointer-events:none}:host(clabs-chat-text) .clabs--chat-text-content-annotation{cursor:pointer;text-decoration:underline;text-decoration-color:var(--cds-text-secondary, #525252);text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:3px;vertical-align:bottom}:host(clabs-chat-text) .clabs--chat-text-highlighted{background:var(--chat-text-element-highlight-color, var(--cds-link-inverse, #78a9ff));text-decoration:none}:host(clabs-chat-text) .clabs--chat-text-highlighted-active{background:var(--chat-text-element-highlight-color, var(--cds-link-inverse-hover, #a6c8ff))}:host(clabs-chat-text) .clabs--chat-text-content-annotation-element{overflow:hidden;inline-size:100%;max-block-size:var(--chat-text-content-annotation-element-height);max-inline-size:100%;padding-block:8px;transition:max-height .3s linear}:host(clabs-chat-text) .clabs--chat-text-content-summarization-element{overflow:hidden;inline-size:100%;max-block-size:var(--chat-text-content-annotation-element-height);max-inline-size:100%;padding-block:8px;transition:max-height .3s linear}:host(clabs-chat-text) .clabs--chat-text-content-summarization-element-hidden{display:none}:host(clabs-chat-text) .clabs--chat-text-content-link{cursor:pointer;text-decoration:underline;text-decoration-color:var(--cds-text-secondary, #525252);text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:3px;vertical-align:bottom}:host(clabs-chat-text) .clabs--chat-text-content-code{border:1px solid var(--cds-border-subtle-01, #c6c6c6);border-radius:4px;background:var(--cds-layer-01, #f4f4f4);color:var(--cds-text-primary, #161616);font-family:IBM Plex Mono,monospace;font-size:12px;letter-spacing:.64px;line-height:20px;vertical-align:bottom;word-break:keep-all}:host(clabs-chat-text) .clabs--chat-text--float-left{display:flex;justify-content:flex-start}`;var St=Object.defineProperty,m=(c,t,e,i)=>{for(var a=void 0,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(t,e,a)||a);return a&&St(t,e,a),a};const R=class R extends A{constructor(){super(...arguments),this.enableHtmlRendering=!1,this.disableNewLines=!1,this._textElements=[],this.textSubElements=[],this._showSummarization=!1,this._translationRegistry=[],this._animationList=[]}firstUpdated(){var t;((t=this.textSubElements)==null?void 0:t.length)>1?this._textElements=this.textSubElements:this.content&&this._formatText(),this.hasAttribute("enable-summarization")&&(this.disableChevrons=!0),this.hasAttribute("text-highlight-color")&&this.style.setProperty("--chat-text-element-highlight-color",this.textHighlightColor),this.style.setProperty("--chat-text-content-annotation-element-height","0px")}updated(t){super.updated(t),t.has("content")&&!(this.textSubElements.length>0)&&this._formatText()}_updateHighlightTarget(t){var i;const e=(i=t==null?void 0:t.detail)==null?void 0:i.currentIndex;if(e>=0){const a=this._translationRegistry.find(n=>n.annotationIndex===e+1);if(this._textElements.forEach(n=>{n.active=!1}),a||a===0){const n=a.subElementIndex;typeof n=="number"&&(this._textElements[n-1].active=!0)}this.requestUpdate()}}_toggleSummarization(){if(this._showSummarization=!this._showSummarization,!this._showSummarization)this._textElements.forEach(t=>{t.active=!1});else{this.selectedAnnotationIndex||(this.selectedAnnotationIndex=0);const t=this.selectedAnnotationIndex+1,e=this._translationRegistry.find(i=>i.annotationIndex===t);if(e){const i=e.subElementIndex;typeof i=="number"&&(this._textElements[i-1].active=!0,setTimeout(()=>{this.style.setProperty("--chat-text-content-annotation-element-height","400px")},20))}}}_handleAnnotationClick(t){var p,u;const e=(t==null?void 0:t.originalTarget)||(t==null?void 0:t.target)||(t==null?void 0:t.srcElement),i=(p=e==null?void 0:e.dataset)==null?void 0:p.source;this.style.setProperty("--chat-text-content-annotation-element-height","0px");const a=(u=e==null?void 0:e.dataset)==null?void 0:u.index,n={originalEvent:t,annotationContent:i,indexInElementsArray:a,elementsArray:this._textElements};if(a){this._textElements.forEach((b,C)=>{C!==parseInt(a)&&(b.active=!1)}),this._textElements[parseInt(a)].active=!this._textElements[parseInt(a)].active,this._textElements[parseInt(a)].active?(n.action="annotation popup closed",this._showSummarization=!0):(n.action="annotation popup opened",this._showSummarization=!1),n.isOpened=this._textElements[parseInt(a)].active,n.textContent=this._textElements[parseInt(a)].text,this._textElements[parseInt(a)].active?i?(this._annotationURLs=this._arrangeSources(i),setTimeout(()=>{this.style.setProperty("--chat-text-content-annotation-element-height","400px")},20),this._annotationIndex=parseInt(a)):(this._annotationURLs=null,this._annotationIndex=null):(this._annotationURLs=null,this._annotationIndex=null);const f=this._translationRegistry.find(b=>b.subElementIndex===parseInt(a)+1);typeof(f==null?void 0:f.annotationIndex)=="number"&&f&&(this.selectedAnnotationIndex=f.annotationIndex-1,this.requestUpdate())}const o=new CustomEvent("on-text-annotation-click",{detail:n,bubbles:!0,composed:!0});this.dispatchEvent(o)}_arrangeSources(t){return t.split(",")}_capitalizeText(t){return t.split(new RegExp("(?<=[.!?]\\s)|(?<=\\n)","g")).map(a=>a.trimStart().charAt(0).toUpperCase()+a.trimStart().slice(1)).join("")}_formatText(){const t=new RegExp("(\\[([^\\]]+)\\]\\(([^)]+)\\))|([^\\[]+)","g"),e=[],i=[];let a;const o=this.content.trim().split(`
`);for(const p of o){for(;(a=t.exec(p))!=null;)if(a[1])i.push({text:a[2],type:"annotation",content:a[3],active:!1}),e.push(a[3]),this._translationRegistry.push({annotationIndex:e.length,subElementIndex:i.length});else if(a[4]){const f=this._checkForHTML(a[4])?"html":"default",b=a[4];i.push({text:this.capitalize?this._capitalizeText(b):b,type:f,active:!1,content:""})}if(!this.disableNewLines&&!this.streaming){if(i.length>1&&i[i.length-1]){const u=i[i.length-1];if((u==null?void 0:u.type)==="new-line")continue}i.push({text:"",type:"new-line",active:!1,content:""})}}this._annotationList=e,this.streaming?this._animateFadeIn(i):(this._annotationList.length>0,this._textElements=i)}_animateFadeIn(t){const e=[];for(const i of t)if(i.type==="default"){const a=i.text.split(" ");for(const n of a)e.push({text:n+" ",type:"default",content:"",active:!1})}else e.push(i);this._textElements=e}_checkForHTML(t){return new RegExp("<[^>]+>","g").test(t)}_formatTextOld(){const t=[],e=new RegExp("\\[([^\\]]+)\\]\\(((?:[^)(]+|\\([^)]+\\))*)\\)","g"),i=this.content,a=this.disableNewLines?[i]:i.split(`
`);for(let n=0;n<a.length;n++){let o;const p=a[n];let u=0;for(;(o=e.exec(p))!==null;){if(o.index>u){const b=p.slice(u,o.index);t.push({text:this.capitalize?this._capitalizeText(b):b,type:"default",active:!1,content:""})}const f=new RegExp("^https?:\\/\\/\\S+$");t.push({text:o[1],type:f.test(o[2])?"link":"annotation",content:o[2],active:!1}),u=e.lastIndex}if(u<p.length){const f=p.slice(u);t.push({text:this.capitalize?this._capitalizeText(f):f,type:"default",content:"",active:!1})}}this._textElements=t}};R.styles=zt;let h=R;m([d({type:String,attribute:"content",reflect:!0})],h.prototype,"content");m([d({type:Boolean,attribute:"align-right"})],h.prototype,"alignRight");m([d({type:Boolean,attribute:"capitalize"})],h.prototype,"capitalize");m([d({type:String,attribute:"text-highlight-color"})],h.prototype,"textHighlightColor");m([d({type:Boolean,attribute:"enable-annotations"})],h.prototype,"enableAnnotations");m([d({type:Boolean,attribute:"enable-summarization"})],h.prototype,"enableSummarization");m([d({type:Boolean,attribute:"enable-html-rendering"})],h.prototype,"enableHtmlRendering");m([d({type:Boolean,attribute:"enable-text-highlighting"})],h.prototype,"enableTextHighlighting");m([d({type:Boolean,attribute:"disable-new-lines"})],h.prototype,"disableNewLines");m([d({type:Boolean,attribute:"enable-complex-feedback"})],h.prototype,"enableComplexFeedback");m([d({type:Boolean,attribute:"disable-chevrons"})],h.prototype,"disableChevrons");m([x()],h.prototype,"_textElements");m([d({type:Array,attribute:"textSubElements"})],h.prototype,"textSubElements");m([x()],h.prototype,"_annotationURLs");m([x()],h.prototype,"_annotationList");m([x()],h.prototype,"_annotationIndex");m([x()],h.prototype,"_showSummarization");m([x()],h.prototype,"_translationRegistry");m([x()],h.prototype,"selectedAnnotationIndex");m([d({type:Boolean,attribute:"streaming"})],h.prototype,"streaming");m([x()],h.prototype,"_animationList");var G={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8 5 13 10 12.3 10.7 8 6.4 3.7 10.7 3 10z"}}],name:"chevron--up",size:16};const Ct=V`:host(clabs-chat-carousel){display:flex;overflow:hidden;background:none;inline-size:100%}:host(clabs-chat-carousel) .clabs--chat-carousel-container{display:flex;flex-direction:column;gap:6px;inline-size:var(--chat-carousel-slides-width, 248px)}:host(clabs-chat-carousel) .clabs--chat-carousel-length{block-size:16px;color:var(--cds-text-secondary, #525252);font-size:12px;padding-block-end:8px;text-align:start}:host(clabs-chat-carousel) .clabs--chat-carousel-slides{display:flex;overflow:hidden;flex-direction:row;flex-grow:1;gap:16px;min-block-size:0}:host(clabs-chat-carousel) .clabs--chat-carousel-slide{display:flex;overflow:hidden;flex:0 0 auto;align-items:center;justify-content:center;border-radius:8px;inline-size:248px}:host(clabs-chat-carousel) .clabs--chat-carousel-img{block-size:100%;inline-size:100%;object-fit:cover;object-position:center}:host(clabs-chat-carousel) .clabs--chat-carousel-controls{display:flex;align-items:center;justify-content:flex-end;block-size:32px;gap:8px;inline-size:100%}:host(clabs-chat-carousel) .clabs--chat-carousel-control-item{block-size:32px;font-size:14px;line-height:30px}:host(clabs-chat-carousel) .clabs--chat-carousel-control-item svg{color:var(--cds-text-secondary, #525252);fill:var(--cds-text-secondary, #525252)}`;var kt=Object.defineProperty,$=(c,t,e,i)=>{for(var a=void 0,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(t,e,a)||a);return a&&kt(t,e,a),a};const I=class I extends A{constructor(){super(...arguments),this.selectedSlide=0,this.contentWidth=248,this.contentHeight=248,this._itemsPerSlide=1,this._slideCounter=0,this._slideGapSize=16,this._maxSlideCounter=0,this._renderedSlideCounter=0}firstUpdated(){this.hasAttribute("elements")?(this._checkElements(),this._updateCarousel()):this.hasAttribute("content")&&this._buildCarousel(),this.hasAttribute("_carouselContent")&&this._updateCarousel(),this.resizeObserver=new ResizeObserver(async()=>{this._updateCarousel()}),this.resizeObserver.observe(this)}updated(t){super.updated(t),t.has("content")&&this._buildCarousel(),t.has("elements")&&this._checkElements(),t.has("contentWidth")&&this._buildCarousel(),t.has("_carouselContent")&&this._updateCarousel(),t.has("selectedSlide")&&this._carouselContent&&this._handleSlideSelection()}_updateCarousel(){if(this._carouselContent){if(this.parentElement instanceof HTMLElement){const e=this.clientWidth;this._itemsPerSlide=Math.max(Math.floor(e/(this.contentWidth+this._slideGapSize)),1),this.maxSlides&&(this._itemsPerSlide=Math.min(this._itemsPerSlide,this.maxSlides)),this.style.setProperty("--chat-carousel-slides-width",this._itemsPerSlide*(this.contentWidth+this._slideGapSize)+"px")}else this.style.setProperty("--chat-carousel-slides-width",this.contentWidth+"px");this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1;let t=Math.floor(this._slideCounter/this._itemsPerSlide)*this._itemsPerSlide;t=Math.min(t,this._carouselContent.length-this._itemsPerSlide),this._renderedSlideCounter=Math.ceil(t/this._itemsPerSlide)+1}}_checkElements(){this._carouselContent=this.elements.map(t=>({content:t.content,type:t.type?t.type:this._checkURLType(t.content)}))}_checkURLType(t){const e=new RegExp("\\.(png|jpg|jpeg|gif|svg|bmp|webp|ico|tiff|tif)$","i"),i=new RegExp("\\.(mp4|avi|flv|mkv|mov|webm|m4v|ogv)$","i"),a=new RegExp("\\.(pdf|doc|docx|csv|xls|xlsx|ppt|pptx|txt|rtf|xml|odt|zip|rar|tar|gz)$","i"),n=new RegExp("\\.(mp3|flac|wav|mpa|wma|midi|ogg)$","i");return e.test(t)?"img":i.test(t)?"video":n.test(t)?"audio":a.test(t)?"file":"url"}_buildCarousel(){try{const t=JSON.parse(this.content);this._carouselContent=t.map(e=>({content:e,type:this._checkURLType(e)}))}catch{if(this.content.endsWith(",")){const e=this.content.slice(0,-1)+"]";try{const i=JSON.parse(e);if(this._carouselContent||(this._carouselContent=[]),i.length>this._carouselContent.length){const a=i[i.length-1];this._carouselContent=[{content:a,type:this._checkURLType(a)},...this._carouselContent]}}catch{console.log("Carousel: failed to parse:"+(this.content.slice(0,-1)+"]"))}}}}_handleNextSlide(){this._slideCounter+this._itemsPerSlide<this._carouselContent.length&&(this._slideCounter+=this._itemsPerSlide),this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1,this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer(),this._notifyIndexChange()}_handlePreviousSlide(){this._slideCounter-this._itemsPerSlide>=0&&(this._slideCounter-=this._itemsPerSlide),this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1,this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer(),this._notifyIndexChange()}_handleSlideSelection(){this.selectedSlide>=0&&this.selectedSlide<=this._carouselContent.length&&(this._slideCounter=this.selectedSlide),this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer()}_notifyIndexChange(){const t=new CustomEvent("on-carousel-index-change",{detail:{action:"CAROUSEL: user changed the current slide",currentIndex:this._slideCounter},bubbles:!0,composed:!0});this.dispatchEvent(t)}_scrollSlideContainer(){var i;const t=(i=this.shadowRoot)==null?void 0:i.querySelector(".clabs--chat-carousel-slides"),e=this._slideCounter*(this.contentWidth+this._slideGapSize)*this._itemsPerSlide;setTimeout(function(){t==null||t.scrollTo({left:e,behavior:"smooth"})},100)}};I.styles=Ct;let y=I;$([d({type:String,attribute:"content",reflect:!0})],y.prototype,"content");$([d({type:Object,attribute:"elements",reflect:!0})],y.prototype,"elements");$([d({type:Number,attribute:"max-slides"})],y.prototype,"maxSlides");$([d({type:Number,attribute:"selected-slide"})],y.prototype,"selectedSlide");$([d({type:String,attribute:"content-width",reflect:!0})],y.prototype,"contentWidth");$([d({type:String,attribute:"content-height",reflect:!0})],y.prototype,"contentHeight");$([x()],y.prototype,"_carouselContent");$([x()],y.prototype,"_itemsPerSlide");$([x()],y.prototype,"_slideCounter");$([x()],y.prototype,"_slideGapSize");$([x()],y.prototype,"_maxSlideCounter");$([x()],y.prototype,"_renderedSlideCounter");const Ht=V`:host(clabs-chat-image) .clabs--chat-image-container{display:flex;overflow:hidden}@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-image) .clabs--chat-image-img{border-radius:8px;animation:fade-in .6s forwards;block-size:auto;max-inline-size:100%;object-fit:contain;opacity:0}`;var Mt=Object.defineProperty,Vt=(c,t,e,i)=>{for(var a=void 0,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(t,e,a)||a);return a&&Mt(t,e,a),a};const L=class L extends A{updated(t){super.updated(t)}firstUpdated(){}};L.styles=Ht;let H=L;Vt([d({type:String,attribute:"content",reflect:!0})],H.prototype,"content");/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:W}=S;function At(c){const{content:t}=c;return s`<div class="${W}--chat-image-container">
    <img class="${W}--chat-image-img" src="${t}" />
  </div>`}var Tt=Object.getOwnPropertyDescriptor,Pt=(c,t,e,i)=>{for(var a=i>1?void 0:i?Tt(t,e):t,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(a)||a);return a};const{stablePrefix:Et}=S;let J=class extends H{render(){return At(this)}};J=Pt([M(`${Et}-chat-image`)],J);/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:z}=S;function Rt(c){const{_carouselContent:t,_slideCounter:e,_maxSlideCounter:i,_handlePreviousSlide:a,_handleNextSlide:n,_renderedSlideCounter:o}=c;return s`<div class="${z}--chat-carousel-container">
    ${t?s` <div class="${z}--chat-carousel-length">
            ${t.length}
            ${t.length===1?"item":"items"}
          </div>
          <div class="${z}--chat-carousel-slides">
            ${t.map(p=>p.type=="img"?s` <div class="${z}--chat-carousel-slide">
                    <clabs-chat-image content="${p.content}">
                    </clabs-chat-image>
                  </div>`:s`
                  <div class="${z}--chat-carousel-slide">
                    <clabs-chat-card content="${p.content}"" type="${p.type}">
                    </clabs-chat-card>
                  </div>
                `)}
          </div>
          <div class="${z}--chat-carousel-controls">
            ${i>1?s`
                  <div class="${z}--chat-carousel-control-item">
                    <cds-button
                      kind="ghost"
                      size="sm"
                      aria-label="Previous Slide"
                      role="button"
                      @click="${a}"
                      ?disabled="${e===0}">
                      ${l(it,{slot:"icon"})}
                    </cds-button>
                  </div>
                  <div class="${z}--chat-carousel-control-item">
                    ${o+" / "+i}
                  </div>
                  <div class="${z}--chat-carousel-control-item">
                    <cds-button
                      kind="ghost"
                      aria-label="Next slide"
                      role="button"
                      size="sm"
                      @click="${n}"
                      ?disabled="${o===i}">
                      ${l(at,{slot:"icon"})}
                    </cds-button>
                  </div>
                `:s``}
          </div>`:s``}
  </div>`}var It=Object.getOwnPropertyDescriptor,Lt=(c,t,e,i)=>{for(var a=i>1?void 0:i?It(t,e):t,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(a)||a);return a};const{stablePrefix:Ut}=S;let X=class extends y{render(){return Rt(this)}};X=Lt([M(`${Ut}-chat-carousel`)],X);/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:g}=S;function Zt(c){const{_textElements:t,alignRight:e,enableHtmlRendering:i,enableSummarization:a,_updateHighlightTarget:n,_annotationURLs:o,_annotationIndex:p,_annotationList:u,_handleAnnotationClick:f,enableTextHighlighting:b,selectedAnnotationIndex:C,disableChevrons:Q,_toggleSummarization:Y,streaming:T,_showSummarization:P}=c;return s`<div
    class="${g}--chat-text"
    role="textbox"
    aria-readonly="true"
    tabindex="0"
    aria-label="text block">
    <div
      class="${g}--chat-text--float-${e?"right":"left"}">
      <div class="${g}--chat-text-content">
        ${t.map((v,k)=>s` ${v.type==="annotation"||v.type==="link"?s`
                  <span
                    class="${g}--chat-text-content-${v.type} ${T?g+"--chat-text-fade-in":""} ${b?g+"--chat-text-highlighted"+(v.active?"-active":""):""} "
                    data-index="${k}"
                    data-source="${v.content}"
                    @click="${f}">
                    ${v.text}
                  </span>
                  ${Q?s``:s`
                        <span
                          class="${g}--chat-text-content-chevron-container"
                          role="button"
                          aria-label="Show link as card below">
                          <span
                            class="${g}--chat-text-content-chevron ${k===p?g+"--chat-text-content-chevron--focused":""}"
                            data-index="${k}"
                            data-source="${v.content}"
                            @click="${f}">
                            ${v.active?s`
                                  ${l(G,{slot:"icon"})}
                                `:s`
                                  ${l(U,{slot:"icon"})}
                                `}
                          </span>
                        </span>
                      `}
                  ${k===p&&!a?s`
                        <slot name="custom-highlight-component">
                          <div
                            class="${g}--chat-text-content-annotation-element">
                            ${o.length>1?s`
                                  <clabs-chat-carousel
                                    content=${JSON.stringify(o)}>
                                  </clabs-chat-carousel>
                                `:s`
                                  <clabs-chat-card
                                    type="url"
                                    content="${o[0]}">
                                  </clabs-chat-card>
                                `}
                          </div>
                        </slot>
                      `:s``}
                `:e?s` <span
                  class="${T?g+"--chat-text-fade-in":""}">
                  ${v.text}</span
                >`:i||v.type==="html"?s` <span
                  class="${g}--chat-text-content-${v.type}"
                  >${tt(v.text)}</span
                >`:v.type==="new-line"?s`<br />`:v.type==="code"?s`
                  <span
                    class="${g}--chat-text-content-${v.type}"
                    >${v.text}</span
                  >
                `:v.type==="default"?s` <span
                  class="${T?g+"--chat-text-fade-in":""}"
                  >${v.text}</span
                >`:s`<p class="${g}--chat-text-content-paragraph">
                  ${v.text}
                </p>`}`)}
        ${a?s`
              <span class="${g}--chat-text-content-chevron-container">
                <span
                  class="${g}--chat-text-content-chevron ${P?g+"--chat-text-content-chevron--focused":""}"
                  @click="${Y}"
                  role="button"
                  aria-label="show all links as a carousel below">
                  ${P?s` ${l(G,{slot:"icon"})} `:s` ${l(U,{slot:"icon"})} `}
                </span>
              </span>
              <div
                class="${g}--chat-text-content-summarization-element ${P?"":g+"--chat-text-content-summarization-element-hidden"}">
                <slot name="custom-highlight-component">
                  <clabs-chat-carousel
                    selected-slide="${C}"
                    max-slides="${1}"
                    @on-carousel-index-change=${n}
                    content=${JSON.stringify(u)}>
                  </clabs-chat-carousel>
                </slot>
              </div>
            `:s``}
      </div>
    </div>
  </div>`}var Bt=Object.getOwnPropertyDescriptor,Dt=(c,t,e,i)=>{for(var a=i>1?void 0:i?Bt(t,e):t,n=c.length-1,o;n>=0;n--)(o=c[n])&&(a=o(a)||a);return a};const{stablePrefix:Ot}=S;let K=class extends h{render(){return Zt(this)}};K=Dt([M(`${Ot}-chat-text`)],K);export{G as _,ct as a};
