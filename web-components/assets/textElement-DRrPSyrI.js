import{n as c,t as A}from"./property-BfUjd6qz.js";import{a as R,i as V,b as p,x as s}from"./iframe-Bec0q31n.js";import{s as S}from"./settings-D122vLMR.js";import{r as v}from"./state-C_H-2XIP.js";import{o as et}from"./unsafe-html-Cbl1ou9m.js";import{s as B}from"./16-DsBA0_wS.js";import{s as u}from"./spread-CY0YaH9Q.js";import"./operational-tag-B7Wl2LgB.js";import{s as it}from"./16-BdEVkwoO.js";import"./button-C0rwJ4oF.js";import"./button-skeleton-Dtvt9og1.js";import{s as at}from"./tableElement-CfcTczxv.js";import{s as st}from"./16-OFquXLiR.js";const ot=R`@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-card) .clabs--chat-card-container{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:0;border:1px solid var(--cds-border-subtle-00, #e0e0e0);border-radius:8px;animation:fade-in .6s forwards;background:var(--cds-background, #ffffff);inline-size:248px;opacity:0;transition:border-color .15s linear}:host(clabs-chat-card) .clabs--chat-card-container:hover{border:1px solid var(--cds-focus, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-side-icon{display:flex;box-sizing:border-box;justify-content:center;padding-inline-end:8px}:host(clabs-chat-card) .clabs--chat-card-main-content{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;flex-grow:1}:host(clabs-chat-card) .clabs--chat-card-image-container{overflow:hidden;background:var(--cds-background, #ffffff);block-size:124px;inline-size:248px}:host(clabs-chat-card) .clabs--chat-card-image-container img{overflow:hidden;background:#d0e2ff;block-size:auto;inline-size:100%;min-block-size:124px}:host(clabs-chat-card) .clabs--chat-card-detail-container{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:16px;block-size:124px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-container-video{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:row;padding:16px;block-size:86px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-side-content{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;block-size:92px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-detail-side-content-video{display:flex;overflow:hidden;box-sizing:border-box;flex-direction:column;block-size:54px;gap:4px;inline-size:100%}:host(clabs-chat-card) .clabs--chat-card-video-container{display:flex;overflow:hidden;align-items:center;justify-content:center;background:#000;block-size:164px;inline-size:248px}:host(clabs-chat-card) .clabs--chat-card-video-container video{overflow:hidden;block-size:auto;inline-size:100%;max-block-size:164px}:host(clabs-chat-card) .clabs--chat-card-detail-title{position:relative;overflow:hidden;block-size:22px;color:var(--cds-text-primary, #161616);font-family:IBM Plex Sans,sans-serif;font-size:16px;font-style:normal;font-weight:500;line-height:22px;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-title:after{position:absolute;z-index:99;background:linear-gradient(to right,var(--chat-card-theme-bottom, "rgba(0,0,0,0)"),var(--chat-card-theme-top, "rgba(0,0,0,0)"));block-size:100%;content:"";inline-size:30px;inset-block-start:0;inset-inline-end:0;pointer-events:none}:host(clabs-chat-card) .clabs--chat-card-detail-description{position:relative;overflow:hidden;box-sizing:border-box;flex-grow:1;color:var(--cds-text-secondary, #525252);font-size:12px;line-height:16px;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-description:after{position:absolute;z-index:99;background:linear-gradient(to right,var(--chat-card-theme-bottom, "rgba(0,0,0,0)"),var(--chat-card-theme-top, "rgba(0,0,0,0)"));block-size:100%;content:"";inline-size:30px;inset-block-start:0;inset-inline-end:0;pointer-events:none}:host(clabs-chat-card) .clabs--chat-card-loader{flex-grow:2;background-color:#d0e2ff;block-size:248px}:host(clabs-chat-card) .clabs--chat-card-loader-file{flex-grow:2;background-color:#d0e2ff;block-size:124px}:host(clabs-chat-card) .clabs--chat-card-detail-link-container{display:flex;align-items:center;justify-content:space-between;block-size:16px;font-size:12px}:host(clabs-chat-card) .clabs--chat-card-detail-link{color:var(--cds-link-primary, #0f62fe);text-decoration:none;white-space:nowrap}:host(clabs-chat-card) .clabs--chat-card-detail-link a{color:var(--cds-link-primary, #0f62fe);text-decoration:none}:host(clabs-chat-card) .clabs--chat-card-detail-link-icon{color:var(--cds-link-primary, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-link-icon svg{fill:var(--cds-link-primary, #0f62fe)}:host(clabs-chat-card) .clabs--chat-card-detail-audio-container{display:flex;box-sizing:border-box;flex-grow:1;align-items:center}:host(clabs-chat-card) .clabs--chat-card-detail-audio-item{color:var(--cds-text-secondary, #525252);font-size:10px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-timer{color:var(--cds-text-secondary, #525252);font-size:10px;padding-inline:8px 9px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-progress-bar{position:relative;box-sizing:border-box;flex-grow:1;border-radius:2px;background:var(--cds-border-subtle-01, #c6c6c6);block-size:4px}:host(clabs-chat-card) .clabs--chat-card-detail-audio-progress{background:var(--cds-link-primary, #0f62fe);block-size:4px;inline-size:var("--chat-card-audio-progress-bar-width", "0%")}`;var nt=Object.defineProperty,w=(o,t,e,a)=>{for(var i=void 0,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(t,e,i)||i);return i&&nt(t,e,i),i};const L=class L extends V{constructor(){super(...arguments),this.fileTypes=["csv","mp3","mp4","png","pdf","ppt","svg","xls","zip","wmv","txt","tsv","mov","jpg","gif"],this._cardData=null,this._isAudioPlaying=!1}firstUpdated(){this._getTheme(),this._buildCard()}updated(t){t.has("content")&&this._buildCard(),(t.has("_audioProgress")||t.has("_audioDuration"))&&this.style.setProperty("--chat-card-audio-progress-bar-width",this._audioProgress/this._audioDuration*100+"%")}_translateHexToRGB(t){const e=t.replace(/^#/,""),a=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return[a,i,n].join(",")}_getTheme(){if(this.parentElement instanceof HTMLElement){const e=getComputedStyle(this.parentElement).getPropertyValue("--cds-background"),a=this._translateHexToRGB(e);this.style.setProperty("--chat-card-theme-bottom"," rgba("+a+", 0)"),this.style.setProperty("--chat-card-theme-top"," rgba("+a+", 1)")}}_buildCard(){this.cardElements==null?this.type==="file"?this._getFileData(this.content):this.type==="audio"?this._getAudioData(this.content):this.loading||this._getSitePreviewData(this.content):(this._cardData=this.cardElements,this.fileType==null&&this.type!=="url"&&(this.fileType=this._getFileType(this.cardElements.link)),this.requestUpdate())}_getShortenedURL(t){try{return new URL(t).host}catch{return""}}_getSiteName(t){try{const e=new URL(t),a=e.hostname.replace(/^www\./,"").split(".").slice(-2,-1)[0],i=a.charAt(0).toUpperCase()+a.slice(1),h=e.pathname.split("/").sort((x,y)=>y.length-x.length).pop(),g=h?h.replace(new RegExp("[-_]+","g")," "):"";return g!==""?i+": "+g.charAt(0).toUpperCase()+g.slice(1):i}catch{return""}}_getVideoFileName(t){try{return t.split("/").slice(-1)[0]}catch{return""}}_getVideoTitle(t){try{return t.split("/").slice(-1)[0].split(".")[0].replace(/_/g," ")}catch{return""}}_getFileType(t){const e=t.split(".");let a=e[e.length-1];return this.fileTypes.indexOf(a)<0&&(a="unknown"),a}_getFileData(t){const e={};e.title=t.split("/").slice(-1),e.shortenedUrl=this._getShortenedURL(t),e.link=t,this.fileType=this._getFileType(t),e.description=this.fileType+" file from: "+t,this._cardData=e,this.requestUpdate()}_getAudioData(t){const e={};e.title=this._getVideoTitle(t),e.shortenedUrl=this._getShortenedURL(t),e.link=t,this.fileType=this._getFileType(t),e.description=this.fileType!=="unknown"?this.fileType.toUpperCase():" file from: "+t,this._cardData=e,this._updateAudioDuration(),this._updateAudioProgress(),this.requestUpdate()}_toggleAudio(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(t.paused?(t.play(),this._isAudioPlaying=!0):(t.pause(),this._isAudioPlaying=!1))}_updateAudioDuration(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(this._audioDuration=t.duration),this._updateAudioProgress()}_updateAudioProgress(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("audio");t instanceof HTMLElement&&(this._audioProgress=t.currentTime)}_formatAudioTime(t){if(!t)return"00:00";const e=Math.floor(t/60);let a=e.toString();e<10&&(a="0"+a);const i=Math.floor(t%60);let n=i.toString();return i<10&&(n="0"+n),a+":"+n}async _getSitePreviewData(t){try{let e={};this.apiUrl&&(e=await this._previewData(t)),(!e||!e.title&&!e.imageUrl&&!e.description)&&(this.type==="video"?e.title=this._getVideoTitle(t):(e.title=this._getSiteName(t),e.description=t)),e.title||(e.title=this._getSiteName(t)),e.link||(e.link=t),e.shortenedUrl=this._getShortenedURL(t),this._cardData=e,this.requestUpdate()}catch{const a=this._getSiteName(t);this._cardData={title:a,imageUrl:null,description:t,link:t},this.requestUpdate()}}async _previewData(t){const e=this.apiUrl,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};try{return await fetch(e,a).then(i=>i.json()).then(i=>i)}catch(i){return{reply:"Error reaching: "+e+" Details: "+i.message,failed:!0}}}};L.styles=ot;let $=L;w([c({type:Object,attribute:"card-elements",reflect:!0})],$.prototype,"cardElements");w([v()],$.prototype,"fileTypes");w([c({type:String,attribute:"content",reflect:!0})],$.prototype,"content");w([c({type:String,attribute:"api-url",reflect:!0})],$.prototype,"apiUrl");w([c({type:String,attribute:"type",reflect:!0})],$.prototype,"type");w([c({type:String,attribute:"file-type",reflect:!0})],$.prototype,"fileType");w([c({type:Boolean,attribute:"loading",reflect:!0})],$.prototype,"loading");w([v()],$.prototype,"_cardData");w([v()],$.prototype,"_isAudioPlaying");w([v()],$.prototype,"_audioProgress");w([v()],$.prototype,"_audioDuration");w([v()],$.prototype,"_audioRatio");const D=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16">${o}<path d="M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M11.7,8.4l-5.5,3c-0.2,0.1-0.3,0.1-0.5,0c-0.2-0.1-0.2-0.3-0.2-0.4V5	c0-0.2,0.1-0.3,0.2-0.4c0.2-0.1,0.3-0.1,0.5,0l5.5,3C12,7.7,12.1,8,11.9,8.2C11.9,8.3,11.8,8.4,11.7,8.4L11.7,8.4z"></path></svg>`,O=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="16" height="16" viewBox="0 0 32 32">${o}<path d="M12 6H10A2 2 0 008 8V24a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2zM22 6H20a2 2 0 00-2 2V24a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2z"></path></svg>`,rt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="16" height="16" viewBox="0 0 32 32">${o}<path d="M31 12.41L29.59 11 26 14.59 22.41 11 21 12.41 24.59 16 21 19.59 22.41 21 26 17.41 29.59 21 31 19.59 27.41 16 31 12.41zM18 30a1 1 0 01-.71-.3L9.67 22H3a1 1 0 01-1-1H2V11a1 1 0 011-1H9.67l7.62-7.7a1 1 0 011.41 0A1 1 0 0119 3V29A1 1 0 0118 30zM4 20h6a1.17 1.17 0 01.79.3L17 26.57V5.43L10.79 11.7A1.17 1.17 0 0110 12H4z"></path></svg>`,j=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 9H22v2h6v4H24v2h4v4H22v2h6a2 2 0 002-2V11A2 2 0 0028 9zM14 23H12V9h6a2 2 0 012 2v5a2 2 0 01-2 2H14zm0-7h4V11H14zM8 9L6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"></path></svg>`,lt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 10v8h0V10m1-1H27v8H24V9H22V19h5v4h2V19h1V17H29V9zM14 23H12V9h6a2 2 0 012 2v5a2 2 0 01-2 2H14zm0-7h4V11H14zM8 9L6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"></path></svg>`,ct=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M30 23H24a2 2 0 01-2-2V11a2 2 0 012-2h6v2H24V21h4V17H26V15h4zM18 19L14.32 9 12 9 12 23 14 23 14 13 17.68 23 20 23 20 9 18 9 18 19zM4 23H2V9H8a2 2 0 012 2v5a2 2 0 01-2 2H4zm0-7H8V11H4z"></path></svg>`,dt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M30 11L30 9 22 9 22 23 24 23 24 17 29 17 29 15 24 15 24 11 30 11zM8 9H2V23H4V18H8a2 2 0 002-2V11A2 2 0 008 9zm0 7H4V11H8zM16 23H12V9h4a4 4 0 014 4v6A4 4 0 0116 23zm-2-2h2a2 2 0 002-2V13a2 2 0 00-2-2H14z"></path></svg>`,ht=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M22 11L25 11 25 23 27 23 27 11 30 11 30 9 22 9 22 11zM14 23H12V9h6a2.002 2.002 0 012 2v5a2.002 2.002 0 01-2 2H14zm0-7h4V10.9985H14zM4 23H2V9H8a2.002 2.002 0 012 2v5a2.002 2.002 0 01-2 2H4zm0-7H8V10.9985H4z"></path></svg>`,pt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M30 23H24a2 2 0 01-2-2V11a2 2 0 012-2h6v2H24V21h4V17H26V15h4zM18 9L16 22 14 9 12 9 14.52 23 17.48 23 20 9 18 9zM8 23H2V21H8V17H4a2 2 0 01-2-2V11A2 2 0 014 9h6v2H4v4H8a2 2 0 012 2v4A2 2 0 018 23z"></path></svg>`,ut=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 23H22V21h6V17H24a2.002 2.002 0 01-2-2V11a2.002 2.002 0 012-2h6v2H24v4h4a2.002 2.002 0 012 2v4A2.0023 2.0023 0 0128 23zM14 21L14 9 12 9 12 23 20 23 20 21 14 21zM10 9L8 9 6 15 4 9 2 9 4.752 16 2 23 4 23 6 17 8 23 10 23 7.245 16 10 9z"></path></svg>`,gt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 9H22V23h2V18h4a2 2 0 002-2V11A2 2 0 0028 9zm0 7H24V11h4zM12 9L12 11 15 11 15 21 12 21 12 23 20 23 20 21 17 21 17 11 20 11 20 9 12 9zM10 9L2 9 2 11 8 11 2 21 2 23 10 23 10 21 4 21 10 11 10 9z"></path></svg>`,N=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M29 9L27 22 25 9 23 9 25.52 23 28.48 23 31 9 29 9zM19 9L17.48 14 17 15.98 16.54 14 15 9 13 9 13 23 15 23 15 15 14.84 13 15.42 15 17 19.63 18.58 15 19.16 13 19 15 19 23 21 23 21 9 19 9zM9.2 9L8.86 17 8.6 21.54 8.19 18 7.51 12.54 5.49 12.54 4.81 18 4.4 21.54 4.14 17 3.8 9 2 9 3 23 5.27 23 6.03 18.07 6.49 14 6.5 13.97 6.51 14 6.97 18.07 7.73 23 10 23 11 9 9.2 9z"></path></svg>`,ft=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M21 11L24 11 24 23 26 23 26 11 29 11 29 9 21 9 21 11zM20 9L18 9 16 15 14 9 12 9 14.75 16 12 23 14 23 16 17 18 23 20 23 17.25 16 20 9zM3 11L6 11 6 23 8 23 8 11 11 11 11 9 3 9 3 11z"></path></svg>`,bt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 9L26 22 24 9 22 9 24.516 23 27.484 23 30 9 28 9zM18 23H12V21h6V17H14a2.002 2.002 0 01-2-2V11a2.002 2.002 0 012-2h6v2H14v4h4a2.002 2.002 0 012 2v4A2.002 2.002 0 0118 23zM2 11L5 11 5 23 7 23 7 11 10 11 10 9 2 9 2 11z"></path></svg>`,vt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 9L26 22 24 9 22 9 24.52 23 27.48 23 30 9 28 9zM18 23H14a2 2 0 01-2-2V11a2 2 0 012-2h4a2 2 0 012 2V21A2 2 0 0118 23zM14 11V21h4V11zM8 9L6.49 14 6 15.98 5.54 14 4 9 2 9 2 23 4 23 4 15 3.84 13 4.42 15 6 19.63 7.58 15 8.16 13 8 15 8 23 10 23 10 9 8 9z"></path></svg>`,xt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M30 23H24a2 2 0 01-2-2V11a2 2 0 012-2h6v2H24V21h4V17H26V15h4zM14 23H12V9h6a2 2 0 012 2v5a2 2 0 01-2 2H14zm0-7h4V11H14zM8 23H4a2 2 0 01-2-2V19H4v2H8V9h2V21A2 2 0 018 23z"></path></svg>`,mt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M2 12v8a3 3 0 003 3h5V15H6v2H8v4H5a1 1 0 01-1-1V12a1 1 0 011-1h5V9H5A3 3 0 002 12zM30 11L30 9 22 9 22 23 24 23 24 17 29 17 29 15 24 15 24 11 30 11zM12 9L12 11 15 11 15 21 12 21 12 23 20 23 20 21 17 21 17 11 20 11 20 9 12 9z"></path></svg>`,yt=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M28 9L26 22 24 9 22 9 24.516 23 27.484 23 30 9 28 9zM18 23H12V21h6V17H14a2.002 2.002 0 01-2-2V11a2.002 2.002 0 012-2h6v2H14v4h4a2.002 2.002 0 012 2v4A2.002 2.002 0 0118 23zM10 23H4a2.0023 2.0023 0 01-2-2V11A2.002 2.002 0 014 9h6v2H4V21h6z"></path></svg>`,Y=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M13 11L13 21 21 16 13 11z"></path><path d="m28,6H4c-1.103,0-2,.8975-2,2v16c0,1.1025.897,2,2,2h24c1.103,0,2-.8975,2-2V8c0-1.1025-.897-2-2-2Zm0,18H4V8h24v16Z"></path></svg>`,F=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M25.7,9.3l-7-7A.9078.9078,0,0,0,18,2H8A2.0059,2.0059,0,0,0,6,4V28a2.0059,2.0059,0,0,0,2,2H24a2.0059,2.0059,0,0,0,2-2V10A.9078.9078,0,0,0,25.7,9.3ZM18,4.4,23.6,10H18ZM24,28H8V4h8v6a2.0059,2.0059,0,0,0,2,2h6Z"></path></svg>`,q=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="24" height="24" viewBox="0 0 32 32">${o}<path d="M25,4H10A2.002,2.002,0,0,0,8,6V20.5563A3.9551,3.9551,0,0,0,6,20a4,4,0,1,0,4,4V12H25v8.5562A3.9545,3.9545,0,0,0,23,20a4,4,0,1,0,4,4V6A2.0023,2.0023,0,0,0,25,4ZM6,26a2,2,0,1,1,2-2A2.0023,2.0023,0,0,1,6,26Zm17,0a2,2,0,1,1,2-2A2.0027,2.0027,0,0,1,23,26ZM10,6H25v4H10Z"></path></svg>`;/**
 * @license
 *
 * Copyright IBM Corp. 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:l}=S;function $t(o){const{_cardData:t,type:e,content:a,fileType:i,_toggleAudio:n,_isAudioPlaying:r,_audioProgress:h,_audioDuration:g,_updateAudioDuration:x,_updateAudioProgress:y,_formatAudioTime:M}=o;return s`<div class="${l}--chat-card-container">
    <div class="${l}--chat-card-main-content">
      ${t?s` ${t.imageUrl&&e==="url"?s` <div class="${l}--chat-card-image-container">
                  <img
                    class="${l}--chat-card-image"
                    src="${t.imageUrl}" />
                </div>`:e==="video"?s` <div class="${l}--chat-card-video-container">
                  <video controls>
                    <source src="${a}" type="video/webm" />
                  </video>
                </div>`:s``}

            <div
              class="${l}--chat-card-detail-container${e==="video"?"-video":""}">
              ${i&&e==="file"?s` <div class="${l}--chat-card-detail-side-icon">
                    ${i==="mp3"?s`${j()}`:i==="mp4"?s`${lt()}`:i==="png"?s`${ct()}`:i==="pdf"?s`${dt()}`:i==="ppt"?s`${ht()}`:i==="svg"?s`${pt()}`:i==="xls"?s`${ut()}`:i==="zip"?s`${gt()}`:i==="wmv"?s`${N()}`:i==="txt"?s`${ft()}`:i==="tsv"?s`${bt()}`:i==="mov"?s`${vt()}`:i==="jpg"?s`${xt()}`:i==="gif"?s`${mt()}`:i==="csv"?s`${yt()}`:s`${F()}`}
                  </div>`:s``}
              ${e==="video"?s` <div class="${l}--chat-card-detail-side-icon">
                    ${Y()}
                  </div>`:s``}
              ${i&&e==="audio"?s`
                    ${i!=="unknown"?s` <div
                          class="${l}--chat-card-detail-side-icon">
                          ${i==="mp3"?s`${j()}`:i==="wmv"?s`${N()}`:s`${q()}`}
                        </div>`:s``}
                  `:s``}

              <div
                class="${l}--chat-card-detail-side-content${e==="video"?"-video":""}">
                <div class="${l}--chat-card-detail-title">
                  ${t.title}
                </div>

                <div class="${l}--chat-card-detail-description">
                  ${t.description?t.description:""}
                </div>
                ${e!=="audio"?s`
                      <div
                        class="${l}--chat-card-detail-link-container">
                        <a
                          class="${l}--chat-card-detail-link"
                          href="${t.link}"
                          target="_blank"
                          >${t.shortenedUrl}</a
                        >

                        <div class="${l}--chat-card-detail-link-icon">
                          <a href="${t.link}" target="_blank">
                            ${it()}
                          </a>
                        </div>
                      </div>
                    `:s`
                      <div
                        class="${l}--chat-card-detail-audio-container">
                        <div
                          class="${l}--chat-card-detail-audio-item">
                          ${r?s` <cds-button
                                aria-label="Pause Audio File"
                                role="button"
                                kind="ghost"
                                size="sm"
                                @click="${n}">
                                ${O({slot:"icon"})}
                              </cds-button>`:s` <cds-button
                                kind="ghost"
                                aria-label="Play Audio File"
                                role="button"
                                size="sm"
                                @click="${n}">
                                ${D({slot:"icon"})}
                              </cds-button>`}
                        </div>
                        <!-- <div class="${l}--chat-card-detail-audio-item">
                <cds-button aria-label="Mute Audio" role="button" kind="ghost" size="sm" disabled>
                  ${rt({slot:"icon"})}
                </cds-button>
                </div>-->
                        <div
                          class="${l}--chat-card-detail-audio-progress-bar">
                          <div
                            class="${l}--chat-card-detail-audio-progress">
                            &nbsp;
                          </div>
                        </div>
                        <div
                          class="${l}--chat-card-detail-audio-timer">
                          ${M(h)}/${M(g)}
                        </div>
                      </div>
                      <audio
                        id="audio"
                        src="${t.link}"
                        @timeupdate="${y}"
                        @loadedmetadata="${x}"></audio>
                    `}
              </div>
            </div>`:s`${e==="url"?s` <div
                  class="${l}--chat-card-image-container"></div>`:e==="video"?s` <div
                  class="${l}--chat-card-video-container"></div>`:s``}

            <div
              class="${l}--chat-card-detail-container${e==="video"?"-video":""}">
              ${e==="file"?s` <div class="${l}--chat-card-detail-side-icon">
                    ${F()}
                  </div>`:s``}
              ${e==="video"?s` <div class="${l}--chat-card-detail-side-icon">
                    ${Y()}
                  </div>`:s``}
              ${e==="audio"?s` <div class="${l}--chat-card-detail-side-icon">
                    ${q()}
                  </div>`:s``}

              <div
                class="${l}--chat-card-detail-side-content${e==="video"?"-video":""}">
                <div class="${l}--chat-card-detail-title">&nbsp;</div>

                <div class="${l}--chat-card-detail-description">
                  &nbsp;
                </div>
                ${e!=="audio"?s`
                      <div
                        class="${l}--chat-card-detail-link-container">
                        <div
                          class="${l}--chat-card-detail-link-icon"></div>
                      </div>
                    `:s`
                      <div
                        class="${l}--chat-card-detail-audio-container">
                        <div
                          class="${l}--chat-card-detail-audio-item">
                          ${r?s` <cds-button
                                aria-label="Pause Audio"
                                role="button"
                                kind="ghost"
                                disabled
                                size="sm">
                                ${O({slot:"icon"})}
                              </cds-button>`:s` <cds-button
                                aria-label="Start Audio"
                                role="button"
                                kind="ghost"
                                disabled
                                size="sm">
                                ${D({slot:"icon"})}
                              </cds-button>`}
                        </div>
                        <div
                          class="${l}--chat-card-detail-audio-progress-bar">
                          <div
                            class="${l}--chat-card-detail-audio-progress">
                            &nbsp;
                          </div>
                        </div>
                        <div
                          class="${l}--chat-card-detail-audio-timer">
                          00:00/00:00
                        </div>
                      </div>
                    `}
              </div>
            </div>`}
    </div>
  </div>`}var _t=Object.getOwnPropertyDescriptor,wt=(o,t,e,a)=>{for(var i=a>1?void 0:a?_t(t,e):t,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(i)||i);return i};const{stablePrefix:zt}=S;let W=class extends ${render(){return $t(this)}};W=wt([A(`${zt}-chat-card`)],W);const Ct=R`:host(clabs-chat-text){overflow:hidden;font-family:IBM Plex Sans,sans-serif;font-size:14px;font-style:normal;font-weight:400;letter-spacing:.16px;line-height:20px;word-break:break-word}:host(clabs-chat-text) .clabs--chat-text--float-right{display:flex;justify-content:flex-end}:host(clabs-chat-text) .clabs--chat-text-content{flex-grow:1;max-inline-size:100%}:host(clabs-chat-text) .clabs--chat-text-content-chevron-container{display:inline-block}:host(clabs-chat-text) .clabs--chat-text-content-paragraph{margin:0}:host(clabs-chat-text) .clabs--chat-text-content-chevron{display:inline-block;box-sizing:border-box;padding:0;border:1px solid var(--cds-border-subtle-01, #c6c6c6);border-radius:8px;margin:0;background:var(--cds-layer-accent-01, #e0e0e0);block-size:16px;cursor:pointer;inline-size:18px;margin-inline:1px;transition:border-color .15s linear;vertical-align:middle}@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-text) .clabs--chat-text-fade-in{animation:fade-in .6s forwards;opacity:0}:host(clabs-chat-text) .clabs--chat-text-content-chevron:hover{border:1px solid var(--cds-focus, #0f62fe);cursor:pointer}:host(clabs-chat-text) .clabs--chat-text-content-chevron--focused{border:1px solid var(--cds-focus, #0f62fe)}:host(clabs-chat-text) .clabs--chat-text-content-chevron svg{fill:var(--cds-text-secondary, #525252);pointer-events:none}:host(clabs-chat-text) .clabs--chat-text-content-annotation{cursor:pointer;text-decoration:underline;text-decoration-color:var(--cds-text-secondary, #525252);text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:3px;vertical-align:bottom}:host(clabs-chat-text) .clabs--chat-text-highlighted{background:var(--chat-text-element-highlight-color, var(--cds-link-inverse, #78a9ff));text-decoration:none}:host(clabs-chat-text) .clabs--chat-text-highlighted-active{background:var(--chat-text-element-highlight-color, var(--cds-link-inverse-hover, #a6c8ff))}:host(clabs-chat-text) .clabs--chat-text-content-annotation-element{overflow:hidden;inline-size:100%;max-block-size:var(--chat-text-content-annotation-element-height);max-inline-size:100%;padding-block:8px;transition:max-height .3s linear}:host(clabs-chat-text) .clabs--chat-text-content-summarization-element{overflow:hidden;inline-size:100%;max-block-size:var(--chat-text-content-annotation-element-height);max-inline-size:100%;padding-block:8px;transition:max-height .3s linear}:host(clabs-chat-text) .clabs--chat-text-content-summarization-element-hidden{display:none}:host(clabs-chat-text) .clabs--chat-text-content-link{cursor:pointer;text-decoration:underline;text-decoration-color:var(--cds-text-secondary, #525252);text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:3px;vertical-align:bottom}:host(clabs-chat-text) .clabs--chat-text-content-code{border:1px solid var(--cds-border-subtle-01, #c6c6c6);border-radius:4px;background:var(--cds-layer-01, #f4f4f4);color:var(--cds-text-primary, #161616);font-family:IBM Plex Mono,monospace;font-size:12px;letter-spacing:.64px;line-height:20px;vertical-align:bottom;word-break:keep-all}:host(clabs-chat-text) .clabs--chat-text--float-left{display:flex;justify-content:flex-start}`;var St=Object.defineProperty,f=(o,t,e,a)=>{for(var i=void 0,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(t,e,i)||i);return i&&St(t,e,i),i};const P=class P extends V{constructor(){super(...arguments),this.enableHtmlRendering=!1,this.disableNewLines=!1,this._textElements=[],this.textSubElements=[],this._showSummarization=!1,this._translationRegistry=[],this._animationList=[]}firstUpdated(){var t;((t=this.textSubElements)==null?void 0:t.length)>1?this._textElements=this.textSubElements:this.content&&this._formatText(),this.hasAttribute("enable-summarization")&&(this.disableChevrons=!0),this.hasAttribute("text-highlight-color")&&this.style.setProperty("--chat-text-element-highlight-color",this.textHighlightColor),this.style.setProperty("--chat-text-content-annotation-element-height","0px")}updated(t){super.updated(t),t.has("content")&&!(this.textSubElements.length>0)&&this._formatText()}_updateHighlightTarget(t){var a;const e=(a=t==null?void 0:t.detail)==null?void 0:a.currentIndex;if(e>=0){const i=this._translationRegistry.find(n=>n.annotationIndex===e+1);if(this._textElements.forEach(n=>{n.active=!1}),i||i===0){const n=i.subElementIndex;typeof n=="number"&&(this._textElements[n-1].active=!0)}this.requestUpdate()}}_toggleSummarization(){if(this._showSummarization=!this._showSummarization,!this._showSummarization)this._textElements.forEach(t=>{t.active=!1});else{this.selectedAnnotationIndex||(this.selectedAnnotationIndex=0);const t=this.selectedAnnotationIndex+1,e=this._translationRegistry.find(a=>a.annotationIndex===t);if(e){const a=e.subElementIndex;typeof a=="number"&&(this._textElements[a-1].active=!0,setTimeout(()=>{this.style.setProperty("--chat-text-content-annotation-element-height","400px")},20))}}}_handleAnnotationClick(t){var h,g;const e=(t==null?void 0:t.originalTarget)||(t==null?void 0:t.target)||(t==null?void 0:t.srcElement),a=(h=e==null?void 0:e.dataset)==null?void 0:h.source;this.style.setProperty("--chat-text-content-annotation-element-height","0px");const i=(g=e==null?void 0:e.dataset)==null?void 0:g.index,n={originalEvent:t,annotationContent:a,indexInElementsArray:i,elementsArray:this._textElements};if(i){this._textElements.forEach((y,M)=>{M!==parseInt(i)&&(y.active=!1)}),this._textElements[parseInt(i)].active=!this._textElements[parseInt(i)].active,this._textElements[parseInt(i)].active?(n.action="annotation popup closed",this._showSummarization=!0):(n.action="annotation popup opened",this._showSummarization=!1),n.isOpened=this._textElements[parseInt(i)].active,n.textContent=this._textElements[parseInt(i)].text,this._textElements[parseInt(i)].active?a?(this._annotationURLs=this._arrangeSources(a),setTimeout(()=>{this.style.setProperty("--chat-text-content-annotation-element-height","400px")},20),this._annotationIndex=parseInt(i)):(this._annotationURLs=null,this._annotationIndex=null):(this._annotationURLs=null,this._annotationIndex=null);const x=this._translationRegistry.find(y=>y.subElementIndex===parseInt(i)+1);typeof(x==null?void 0:x.annotationIndex)=="number"&&x&&(this.selectedAnnotationIndex=x.annotationIndex-1,this.requestUpdate())}const r=new CustomEvent("on-text-annotation-click",{detail:n,bubbles:!0,composed:!0});this.dispatchEvent(r)}_arrangeSources(t){return t.split(",")}_capitalizeText(t){return t.split(new RegExp("(?<=[.!?]\\s)|(?<=\\n)","g")).map(i=>i.trimStart().charAt(0).toUpperCase()+i.trimStart().slice(1)).join("")}_formatText(){const t=new RegExp("(\\[([^\\]]+)\\]\\(([^)]+)\\))|([^\\[]+)","g"),e=[],a=[];let i;const r=this.content.trim().split(`
`);for(const h of r){for(;(i=t.exec(h))!=null;)if(i[1])a.push({text:i[2],type:"annotation",content:i[3],active:!1}),e.push(i[3]),this._translationRegistry.push({annotationIndex:e.length,subElementIndex:a.length});else if(i[4]){const x=this._checkForHTML(i[4])?"html":"default",y=i[4];a.push({text:this.capitalize?this._capitalizeText(y):y,type:x,active:!1,content:""})}if(!this.disableNewLines&&!this.streaming){if(a.length>1&&a[a.length-1]){const g=a[a.length-1];if((g==null?void 0:g.type)==="new-line")continue}a.push({text:"",type:"new-line",active:!1,content:""})}}this._annotationList=e,this.streaming?this._animateFadeIn(a):(this._annotationList.length>0,this._textElements=a)}_animateFadeIn(t){const e=[];for(const a of t)if(a.type==="default"){const i=a.text.split(" ");for(const n of i)e.push({text:n+" ",type:"default",content:"",active:!1})}else e.push(a);this._textElements=e}_checkForHTML(t){return new RegExp("<[^>]+>","g").test(t)}_formatTextOld(){const t=[],e=new RegExp("\\[([^\\]]+)\\]\\(((?:[^)(]+|\\([^)]+\\))*)\\)","g"),a=this.content,i=this.disableNewLines?[a]:a.split(`
`);for(let n=0;n<i.length;n++){let r;const h=i[n];let g=0;for(;(r=e.exec(h))!==null;){if(r.index>g){const y=h.slice(g,r.index);t.push({text:this.capitalize?this._capitalizeText(y):y,type:"default",active:!1,content:""})}const x=new RegExp("^https?:\\/\\/\\S+$");t.push({text:r[1],type:x.test(r[2])?"link":"annotation",content:r[2],active:!1}),g=e.lastIndex}if(g<h.length){const x=h.slice(g);t.push({text:this.capitalize?this._capitalizeText(x):x,type:"default",content:"",active:!1})}}this._textElements=t}};P.styles=Ct;let d=P;f([c({type:String,attribute:"content",reflect:!0})],d.prototype,"content");f([c({type:Boolean,attribute:"align-right"})],d.prototype,"alignRight");f([c({type:Boolean,attribute:"capitalize"})],d.prototype,"capitalize");f([c({type:String,attribute:"text-highlight-color"})],d.prototype,"textHighlightColor");f([c({type:Boolean,attribute:"enable-annotations"})],d.prototype,"enableAnnotations");f([c({type:Boolean,attribute:"enable-summarization"})],d.prototype,"enableSummarization");f([c({type:Boolean,attribute:"enable-html-rendering"})],d.prototype,"enableHtmlRendering");f([c({type:Boolean,attribute:"enable-text-highlighting"})],d.prototype,"enableTextHighlighting");f([c({type:Boolean,attribute:"disable-new-lines"})],d.prototype,"disableNewLines");f([c({type:Boolean,attribute:"enable-complex-feedback"})],d.prototype,"enableComplexFeedback");f([c({type:Boolean,attribute:"disable-chevrons"})],d.prototype,"disableChevrons");f([v()],d.prototype,"_textElements");f([c({type:Array,attribute:"textSubElements"})],d.prototype,"textSubElements");f([v()],d.prototype,"_annotationURLs");f([v()],d.prototype,"_annotationList");f([v()],d.prototype,"_annotationIndex");f([v()],d.prototype,"_showSummarization");f([v()],d.prototype,"_translationRegistry");f([v()],d.prototype,"selectedAnnotationIndex");f([c({type:Boolean,attribute:"streaming"})],d.prototype,"streaming");f([v()],d.prototype,"_animationList");const Z=({children:o,...t}={})=>p`<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...="${u(t)}" aria-hidden="true" width="16" height="16" viewBox="0 0 16 16">${o}<path d="M8 5L13 10 12.3 10.7 8 6.4 3.7 10.7 3 10z"></path></svg>`,Mt=R`:host(clabs-chat-carousel){display:flex;overflow:hidden;background:none;inline-size:100%}:host(clabs-chat-carousel) .clabs--chat-carousel-container{display:flex;flex-direction:column;gap:6px;inline-size:var(--chat-carousel-slides-width, 248px)}:host(clabs-chat-carousel) .clabs--chat-carousel-length{block-size:16px;color:var(--cds-text-secondary, #525252);font-size:12px;padding-block-end:8px;text-align:start}:host(clabs-chat-carousel) .clabs--chat-carousel-slides{display:flex;overflow:hidden;flex-direction:row;flex-grow:1;gap:16px;min-block-size:0}:host(clabs-chat-carousel) .clabs--chat-carousel-slide{display:flex;overflow:hidden;flex:0 0 auto;align-items:center;justify-content:center;border-radius:8px;inline-size:248px}:host(clabs-chat-carousel) .clabs--chat-carousel-img{block-size:100%;inline-size:100%;object-fit:cover;object-position:center}:host(clabs-chat-carousel) .clabs--chat-carousel-controls{display:flex;align-items:center;justify-content:flex-end;block-size:32px;gap:8px;inline-size:100%}:host(clabs-chat-carousel) .clabs--chat-carousel-control-item{block-size:32px;font-size:14px;line-height:30px}:host(clabs-chat-carousel) .clabs--chat-carousel-control-item svg{color:var(--cds-text-secondary, #525252);fill:var(--cds-text-secondary, #525252)}`;var kt=Object.defineProperty,z=(o,t,e,a)=>{for(var i=void 0,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(t,e,i)||i);return i&&kt(t,e,i),i};const E=class E extends V{constructor(){super(...arguments),this.selectedSlide=0,this.contentWidth=248,this.contentHeight=248,this._itemsPerSlide=1,this._slideCounter=0,this._slideGapSize=16,this._maxSlideCounter=0,this._renderedSlideCounter=0}firstUpdated(){this.hasAttribute("elements")?(this._checkElements(),this._updateCarousel()):this.hasAttribute("content")&&this._buildCarousel(),this.hasAttribute("_carouselContent")&&this._updateCarousel(),this.resizeObserver=new ResizeObserver(async()=>{this._updateCarousel()}),this.resizeObserver.observe(this)}updated(t){super.updated(t),t.has("content")&&this._buildCarousel(),t.has("elements")&&this._checkElements(),t.has("contentWidth")&&this._buildCarousel(),t.has("_carouselContent")&&this._updateCarousel(),t.has("selectedSlide")&&this._carouselContent&&this._handleSlideSelection()}_updateCarousel(){if(this._carouselContent){if(this.parentElement instanceof HTMLElement){const e=this.clientWidth;this._itemsPerSlide=Math.max(Math.floor(e/(this.contentWidth+this._slideGapSize)),1),this.maxSlides&&(this._itemsPerSlide=Math.min(this._itemsPerSlide,this.maxSlides)),this.style.setProperty("--chat-carousel-slides-width",this._itemsPerSlide*(this.contentWidth+this._slideGapSize)+"px")}else this.style.setProperty("--chat-carousel-slides-width",this.contentWidth+"px");this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1;let t=Math.floor(this._slideCounter/this._itemsPerSlide)*this._itemsPerSlide;t=Math.min(t,this._carouselContent.length-this._itemsPerSlide),this._renderedSlideCounter=Math.ceil(t/this._itemsPerSlide)+1}}_checkElements(){this._carouselContent=this.elements.map(t=>({content:t.content,type:t.type?t.type:this._checkURLType(t.content)}))}_checkURLType(t){const e=new RegExp("\\.(png|jpg|jpeg|gif|svg|bmp|webp|ico|tiff|tif)$","i"),a=new RegExp("\\.(mp4|avi|flv|mkv|mov|webm|m4v|ogv)$","i"),i=new RegExp("\\.(pdf|doc|docx|csv|xls|xlsx|ppt|pptx|txt|rtf|xml|odt|zip|rar|tar|gz)$","i"),n=new RegExp("\\.(mp3|flac|wav|mpa|wma|midi|ogg)$","i");return e.test(t)?"img":a.test(t)?"video":n.test(t)?"audio":i.test(t)?"file":"url"}_buildCarousel(){try{const t=JSON.parse(this.content);this._carouselContent=t.map(e=>({content:e,type:this._checkURLType(e)}))}catch{if(this.content.endsWith(",")){const e=this.content.slice(0,-1)+"]";try{const a=JSON.parse(e);if(this._carouselContent||(this._carouselContent=[]),a.length>this._carouselContent.length){const i=a[a.length-1];this._carouselContent=[{content:i,type:this._checkURLType(i)},...this._carouselContent]}}catch{console.log("Carousel: failed to parse:"+(this.content.slice(0,-1)+"]"))}}}}_handleNextSlide(){this._slideCounter+this._itemsPerSlide<this._carouselContent.length&&(this._slideCounter+=this._itemsPerSlide),this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1,this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer(),this._notifyIndexChange()}_handlePreviousSlide(){this._slideCounter-this._itemsPerSlide>=0&&(this._slideCounter-=this._itemsPerSlide),this._maxSlideCounter=Math.ceil(this._carouselContent.length/this._itemsPerSlide)-1,this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer(),this._notifyIndexChange()}_handleSlideSelection(){this.selectedSlide>=0&&this.selectedSlide<=this._carouselContent.length&&(this._slideCounter=this.selectedSlide),this._renderedSlideCounter=Math.floor(this._slideCounter/this._itemsPerSlide)+1,this._scrollSlideContainer()}_notifyIndexChange(){const t=new CustomEvent("on-carousel-index-change",{detail:{action:"CAROUSEL: user changed the current slide",currentIndex:this._slideCounter},bubbles:!0,composed:!0});this.dispatchEvent(t)}_scrollSlideContainer(){var a;const t=(a=this.shadowRoot)==null?void 0:a.querySelector(".clabs--chat-carousel-slides"),e=this._slideCounter*(this.contentWidth+this._slideGapSize)*this._itemsPerSlide;setTimeout(function(){t==null||t.scrollTo({left:e,behavior:"smooth"})},100)}};E.styles=Mt;let _=E;z([c({type:String,attribute:"content",reflect:!0})],_.prototype,"content");z([c({type:Object,attribute:"elements",reflect:!0})],_.prototype,"elements");z([c({type:Number,attribute:"max-slides"})],_.prototype,"maxSlides");z([c({type:Number,attribute:"selected-slide"})],_.prototype,"selectedSlide");z([c({type:String,attribute:"content-width",reflect:!0})],_.prototype,"contentWidth");z([c({type:String,attribute:"content-height",reflect:!0})],_.prototype,"contentHeight");z([v()],_.prototype,"_carouselContent");z([v()],_.prototype,"_itemsPerSlide");z([v()],_.prototype,"_slideCounter");z([v()],_.prototype,"_slideGapSize");z([v()],_.prototype,"_maxSlideCounter");z([v()],_.prototype,"_renderedSlideCounter");const Ht=R`:host(clabs-chat-image) .clabs--chat-image-container{display:flex;overflow:hidden}@keyframes fade-in{0%{opacity:0}to{opacity:1}}:host(clabs-chat-image) .clabs--chat-image-img{border-radius:8px;animation:fade-in .6s forwards;block-size:auto;max-inline-size:100%;object-fit:contain;opacity:0}`;var At=Object.defineProperty,Rt=(o,t,e,a)=>{for(var i=void 0,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(t,e,i)||i);return i&&At(t,e,i),i};const U=class U extends V{updated(t){super.updated(t)}firstUpdated(){}};U.styles=Ht;let H=U;Rt([c({type:String,attribute:"content",reflect:!0})],H.prototype,"content");/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:G}=S;function Vt(o){const{content:t}=o;return s`<div class="${G}--chat-image-container">
    <img class="${G}--chat-image-img" src="${t}" />
  </div>`}var It=Object.getOwnPropertyDescriptor,Tt=(o,t,e,a)=>{for(var i=a>1?void 0:a?It(t,e):t,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(i)||i);return i};const{stablePrefix:Lt}=S;let J=class extends H{render(){return Vt(this)}};J=Tt([A(`${Lt}-chat-image`)],J);/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:C}=S;function Pt(o){const{_carouselContent:t,_slideCounter:e,_maxSlideCounter:a,_handlePreviousSlide:i,_handleNextSlide:n,_renderedSlideCounter:r}=o;return s`<div class="${C}--chat-carousel-container">
    ${t?s` <div class="${C}--chat-carousel-length">
            ${t.length}
            ${t.length===1?"item":"items"}
          </div>
          <div class="${C}--chat-carousel-slides">
            ${t.map(h=>h.type=="img"?s` <div class="${C}--chat-carousel-slide">
                    <clabs-chat-image content="${h.content}">
                    </clabs-chat-image>
                  </div>`:s`
                  <div class="${C}--chat-carousel-slide">
                    <clabs-chat-card content="${h.content}"" type="${h.type}">
                    </clabs-chat-card>
                  </div>
                `)}
          </div>
          <div class="${C}--chat-carousel-controls">
            ${a>1?s`
                  <div class="${C}--chat-carousel-control-item">
                    <cds-button
                      kind="ghost"
                      size="sm"
                      aria-label="Previous Slide"
                      role="button"
                      @click="${i}"
                      ?disabled="${e===0}">
                      ${st({slot:"icon"})}
                    </cds-button>
                  </div>
                  <div class="${C}--chat-carousel-control-item">
                    ${r+" / "+a}
                  </div>
                  <div class="${C}--chat-carousel-control-item">
                    <cds-button
                      kind="ghost"
                      aria-label="Next slide"
                      role="button"
                      size="sm"
                      @click="${n}"
                      ?disabled="${r===a}">
                      ${at({slot:"icon"})}
                    </cds-button>
                  </div>
                `:s``}
          </div>`:s``}
  </div>`}var Et=Object.getOwnPropertyDescriptor,Ut=(o,t,e,a)=>{for(var i=a>1?void 0:a?Et(t,e):t,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(i)||i);return i};const{stablePrefix:Bt}=S;let K=class extends _{render(){return Pt(this)}};K=Ut([A(`${Bt}-chat-carousel`)],K);/**
 * @license
 *
 * Copyright IBM Corp. 2024
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */const{stablePrefix:b}=S;function Dt(o){const{_textElements:t,alignRight:e,enableHtmlRendering:a,enableSummarization:i,_updateHighlightTarget:n,_annotationURLs:r,_annotationIndex:h,_annotationList:g,_handleAnnotationClick:x,enableTextHighlighting:y,selectedAnnotationIndex:M,disableChevrons:X,_toggleSummarization:tt,streaming:I,_showSummarization:T}=o;return s`<div
    class="${b}--chat-text"
    role="textbox"
    aria-readonly="true"
    tabindex="0"
    aria-label="text block">
    <div
      class="${b}--chat-text--float-${e?"right":"left"}">
      <div class="${b}--chat-text-content">
        ${t.map((m,k)=>s` ${m.type==="annotation"||m.type==="link"?s`
                  <span
                    class="${b}--chat-text-content-${m.type} ${I?b+"--chat-text-fade-in":""} ${y?b+"--chat-text-highlighted"+(m.active?"-active":""):""} "
                    data-index="${k}"
                    data-source="${m.content}"
                    @click="${x}">
                    ${m.text}
                  </span>
                  ${X?s``:s`
                        <span
                          class="${b}--chat-text-content-chevron-container"
                          role="button"
                          aria-label="Show link as card below">
                          <span
                            class="${b}--chat-text-content-chevron ${k===h?b+"--chat-text-content-chevron--focused":""}"
                            data-index="${k}"
                            data-source="${m.content}"
                            @click="${x}">
                            ${m.active?s` ${Z({slot:"icon"})} `:s` ${B({slot:"icon"})} `}
                          </span>
                        </span>
                      `}
                  ${k===h&&!i?s`
                        <slot name="custom-highlight-component">
                          <div
                            class="${b}--chat-text-content-annotation-element">
                            ${r.length>1?s`
                                  <clabs-chat-carousel
                                    content=${JSON.stringify(r)}>
                                  </clabs-chat-carousel>
                                `:s`
                                  <clabs-chat-card
                                    type="url"
                                    content="${r[0]}">
                                  </clabs-chat-card>
                                `}
                          </div>
                        </slot>
                      `:s``}
                `:e?s` <span
                  class="${I?b+"--chat-text-fade-in":""}">
                  ${m.text}</span
                >`:a||m.type==="html"?s` <span
                  class="${b}--chat-text-content-${m.type}"
                  >${et(m.text)}</span
                >`:m.type==="new-line"?s`<br />`:m.type==="code"?s`
                  <span
                    class="${b}--chat-text-content-${m.type}"
                    >${m.text}</span
                  >
                `:m.type==="default"?s` <span
                  class="${I?b+"--chat-text-fade-in":""}"
                  >${m.text}</span
                >`:s`<p class="${b}--chat-text-content-paragraph">
                  ${m.text}
                </p>`}`)}
        ${i?s`
              <span class="${b}--chat-text-content-chevron-container">
                <span
                  class="${b}--chat-text-content-chevron ${T?b+"--chat-text-content-chevron--focused":""}"
                  @click="${tt}"
                  role="button"
                  aria-label="show all links as a carousel below">
                  ${T?s` ${Z({slot:"icon"})} `:s` ${B({slot:"icon"})} `}
                </span>
              </span>
              <div
                class="${b}--chat-text-content-summarization-element ${T?"":b+"--chat-text-content-summarization-element-hidden"}">
                <slot name="custom-highlight-component">
                  <clabs-chat-carousel
                    selected-slide="${M}"
                    max-slides="${1}"
                    @on-carousel-index-change=${n}
                    content=${JSON.stringify(g)}>
                  </clabs-chat-carousel>
                </slot>
              </div>
            `:s``}
      </div>
    </div>
  </div>`}var Ot=Object.getOwnPropertyDescriptor,jt=(o,t,e,a)=>{for(var i=a>1?void 0:a?Ot(t,e):t,n=o.length-1,r;n>=0;n--)(r=o[n])&&(i=r(i)||i);return i};const{stablePrefix:Nt}=S;let Q=class extends d{render(){return Dt(this)}};Q=jt([A(`${Nt}-chat-text`)],Q);export{dt as a,Z as s};
